[{"title":"gitå¸¸ç”¨æ“ä½œä¸æŠ€å·§","url":"%2F2020%2F03%2F30%2Fgit%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E4%B8%8E%E6%8A%80%E5%B7%A7%2F","content":"\n\ngit pull <è¿œç¨‹ä¸»æœºå> <è¿œç¨‹åˆ†æ”¯å>:<æœ¬åœ°åˆ†æ”¯å>\nå¦‚æ‹‰å–è¿œç¨‹çš„masteråˆ†æ”¯åˆ°æœ¬åœ°wyåˆ†æ”¯ï¼š\ngit pull origin master:wy\n"},{"title":"å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“","url":"%2F2019%2F12%2F30%2F%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84%E9%A1%B9%E7%9B%AEJAR%E5%88%B0MAVEN%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93%2F","content":"## ä¸ºä»€ä¹ˆå†™è¿™ç¯‡æ–‡ç« \n&emsp;&emsp;mavenæ˜¯javaä¸–ç•Œæœ€æµè¡Œçš„æ„å»ºå·¥å…·ï¼Œåšjavaçš„ç¨‹åºå‘˜åº”è¯¥æ²¡å°‘ä½¿ç”¨mavenä¸­å¤®ä»“åº“ä¸­çš„å„ç§jaråŒ…ï¼Œæ–¹ä¾¿è§£å†³äº†å·¥ä½œä¸­å¾ˆå¤šé—®é¢˜ï¼Œæé«˜äº†ç¼–ç æ•ˆç‡ã€‚ç¨‹åºå‘˜ç•Œæœ‰ä¸ªç¼–ç¨‹åŸåˆ™å°±æ˜¯ï¼šä¸è¦é‡å¤é€ è½®å­ï¼Œæ‰€ä»¥å·¥ä½œä¸­æ—¶å¸¸ä¼šæŠ½å–å‡ºå¾ˆå¤šå®ç”¨çš„å·¥å…·ç±»ã€åŒ…ç­‰ç­‰ã€‚ä½†æ˜¯å’±ä»¬ä¹Ÿä¸èƒ½æ€»æ˜¯åªå–ä¸äºˆï¼Œåº”è¯¥æ‡‚å¾—å¥‰çŒ®ï¼Œå½“ä½ å†™å¥½äº†ä¸€ä¸ªååˆ†å¥½ç”¨çš„jaråŒ…ï¼Œæƒ³è´¡çŒ®å‡ºå»ç»™å¤§å®¶ä½¿ç”¨çš„æ—¶å€™ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæ–¹æ³•å°±æ˜¯å‘å¸ƒåˆ°mavençš„ä¸­å¤®ä»“åº“ï¼Œåˆ«äººå°±å¯ä»¥é€šè¿‡mavenä¾èµ–å¼•ç”¨ã€‚ä¸è¿‡è¿™ä¸ªå‘å¸ƒè¿‡ç¨‹ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œæœ¬æ–‡å°±æ¥è¯¦ç»†è¯´ä¸‹å¦‚ä½•å‘å¸ƒè‡ªå·±çš„jaråŒ…åˆ°mavençš„ä¸­å¤®ä»“åº“ã€‚\n## å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“çš„å¥½å¤„\n&emsp;&emsp;é¦–å…ˆï¼Œä½œä¸ºä¸€ä¸ªjavaä»ä¸šè€…ï¼Œå¯¹å¤©å¤©åœ¨ç”¨çš„ä¸œè¥¿ï¼Œåšä¸€ä¸ªæ·±å…¥çš„äº†è§£ï¼Œå­¦ä¼šå‘å¸ƒä¸€ä¸ªé¡¹ç›®åˆ°ä¸­å¤®ä»“åº“ã€‚å¯¹äºæˆ‘æ¥è®²ï¼Œå¾€mavenå‘å¸ƒè‡ªå·±çš„é¡¹ç›®ï¼Œå¼€å§‹æœ‰äº†åˆ©ç”¨ä¸‹ç­æ—¶é—´å¥½å¥½å†™ç‚¹å¼€æºä»£ç å­¦ä¹ å’Œè£…é€¼çš„å†²åŠ¨ã€‚å…¶æ¬¡å‰é¢è¯´åˆ°ç¨‹åºç»å¯¹ä¸è¦é‡å¤é€ è½®å­ï¼Œæˆ‘åœ¨åšå¼€æºé¡¹ç›®[SQLPower](https://github.com/bebee4java/sqlpower)å’Œ[SQLAlarm](https://github.com/bebee4java/sqlalarm)çš„æ—¶å€™æœ‰å¾ˆå¤šå…¬ç”¨çš„utilç±»éœ€è¦æŠ½å–æˆcommonæ¨¡å—ï¼Œæ¯”è¾ƒå¥½çš„åšæ³•å°±æ˜¯æ–°å»ºä¸€ä¸ª[common-utils](https://github.com/bebee4java/common-utils)é¡¹ç›®ï¼ŒæŠŠæ‰€æœ‰å…¬å…±çš„ä»£ç æ”¾åœ¨è¿™é¡¹ç›®ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°mavenä»“åº“é‡Œã€‚å¦‚æ­¤ä¸€æ¥å¦å¤–ä¸¤ä¸ªé¡¹ç›®å°±éƒ½å¯ä»¥é€šè¿‡mavenä¾èµ–ä½¿ç”¨äº†ã€‚è¿™æ ·æ—¢æ–¹ä¾¿äº†è‡ªå·±ä¹Ÿå¾€mavenä»“åº“ä¸­è´¡çŒ®äº†è‡ªå·±çš„ä»£ç ï¼Œæœ‰å¯èƒ½åˆ«äººé€šè¿‡ä½ çš„é¡¹ç›®ä¹Ÿèƒ½æä¾›æ•ˆç‡ã€‚åˆ©äººåˆ©å·±çš„äº‹æƒ…è¿˜æ˜¯å¾ˆå€¼å¾—å¤§å®¶å»å°è¯•å®è·µçš„ã€‚\n## å‘å¸ƒæµç¨‹\n&emsp;&emsp;åœ¨å‘å¸ƒå‰,æ‚¨éœ€è¦æœ‰è‡ªå·±çš„é¡¹ç›®ä¸»é¡µå¹¶å¼€æºçš„ä»£ç ,æ‚¨å¯ä»¥ä½¿ç”¨GitHubæˆ–è€…gitlab,ä¸‹é¢çš„å†…å®¹ä»¥GitHubä¸ºä¾‹ã€‚\n### æ³¨å†Œ sonatypeçš„Jiraå¸å·\næ³¨å†Œåœ°å€: https://issues.sonatype.org/secure/Signup!default.jspa\n\næ³¨å†Œå¾ˆç®€å•,é‡è¦çš„æ˜¯é‚®ç®±åœ°å€ä¸€å®šè¦æ­£ç¡®,issueæœ‰ä»»ä½•å˜åŠ¨éƒ½ä¼šé€šè¿‡é‚®ä»¶é€šçŸ¥.\n> è¿™é‡Œè¦ç€é‡è¯´æ˜ä¸€ä¸‹: Usernameå­—æ®µä¸€å®šè¦ä½¿ç”¨è‹±æ–‡+æ•°å­—,ä¸€å®šä¸è¦ä½¿ç”¨ä¸­æ–‡!!!å¦åˆ™å®˜æ–¹æ— æ³•åˆ†é…æƒé™ç»™ä½ ï¼Œä¼šè®©ä½ å¦è¡Œæ³¨å†Œã€‚\næ³¨å†Œå®Œæˆåä½ ä¼šæ”¶åˆ°å®˜æ–¹ç»™ä½ çš„ä¸€ä»½é‚®ä»¶ï¼š\n![signup](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/signup.png)\n\n### ç™»å½•Jira\næ³¨å†Œå®Œæˆåç™»é™†: https://issues.sonatype.org/login.jsp\n### åˆ›å»ºä¸€ä¸ª Issue\n> é€šè¿‡ã€Createã€‘æŒ‰é’®åˆ›å»º\n![new_issue](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/new_issue.png)\n> Projecté€‰æ‹©ã€Community Support - Open Source Project Repository Hosting (OSSRH)ã€‘\n> Issue Type: é€‰æ‹©ã€New Projectã€‘\n> Summaryå’ŒDescription: è‡ªå·±å¡«,æ³¨æ„è¦ç”¨è‹±æ–‡\n> Group Id: è¿™ä¸ªå¿…é¡»è¦æ³¨æ„,å¦‚æœä½ ç”¨çš„æ˜¯GitHub,ä¸€å®šè¦æ˜¯ com.github.ä½ çš„githubç”¨æˆ·å,ä¾‹å¦‚æˆ‘çš„é¡¹ç›®åœ°å€æ˜¯:https://github.com/bebee4java/common-utils, é‚£æˆ‘çš„groupIdå°±æ˜¯com.github.bebee4java, å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ GitHubçš„Pageçš„åŸŸå io.github.ä½ çš„githubç”¨æˆ·å. å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåå’Œé¡¹ç›®åœ°å€ä¹Ÿå¯ä»¥,å®˜æ–¹äººå‘˜ä¼šè¯¢é—®ä½ æ˜¯å¦æœ‰è¿™ä¸ªåŸŸåçš„æ‰€æœ‰æƒ.åœ¨ä½ é¡¹ç›®çš„pomé‡Œä¸€å®šè¦ä½¿ç”¨è¿™ä¸ªgroupId,æœ€å¥½åŒ…è·¯å¾„ä¹Ÿä½¿ç”¨.\n> Project URL: æ˜¯ä½ çš„é¡¹ç›®åœ°å€\n> SCM url: æ˜¯ä½ çš„é¡¹ç›®gitåœ°å€\n> Username(s): å¯ä»¥ä¸ç”¨å¡«,è¿™æ˜¯èƒ½è¾…åŠ©ä½ æäº¤é¡¹ç›®çš„åˆä½œäººçš„å¸å·,å‰ææ˜¯ä»–ä¹Ÿå¾—åœ¨è¿™ä¸ªJiraæ³¨å†Œ\n> å…¶ä»–ä½¿ç”¨é»˜è®¤å€¼å°±è¡Œäº†\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/issue.png)\nåˆ›å»ºå¥½Issueåå°±ç­‰å¾…å®˜æ–¹å›å¤å§ã€‚è¿™ä¸ªéœ€è¦ä¸€æ®µæ—¶é—´çš„ç­‰å¾…ï¼Œè¿æ°”å¥½çš„è¯å¾ˆå¿«å°±ä¼šæœ‰å·¥ä½œäººå‘˜å›å¤ä½ ã€‚\n\nè¿™è¾¹æˆ‘ä½¿ç”¨è‡ªå·±çš„åŸŸåä½œä¸ºé¡¹ç›®çš„Group Idã€‚ç„¶åå·¥ä½œäººå‘˜ç»™æˆ‘å›å¤äº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/oss-domain.png)\nCentral OSSRH é—®ä½ ï¼Œè¿™ä¸ªåŸŸåæ˜¯ä½ çš„ä¹ˆï¼Œæ€ä¹ˆè¯æ˜è¿™ä¸ªåŸŸåæ˜¯ä½ çš„å‘¢ï¼Ÿä»–ç»™äº†ä½ ä¸¤ç§è§£å†³æ–¹æ³•ã€‚\n1. åœ¨åŸŸåè§£æä¸­åŠ ä¸Šä¸€ä¸ªTxtè®°å½•ï¼ŒæŒ‡å‘ä½ å‘å¸ƒçš„è¿™ä¸ªIssues(ä»–ç§°ä½œJIRA ticket:)ã€‚ï¼ˆæœ€å¿«ï¼‰\n2. è®¾ç½®é‡å®šå‘åˆ°æ‚¨çš„Githubé¡µé¢ï¼ˆå¦‚æœå°šä¸å­˜åœ¨ï¼‰\n\næ‰€ä»¥ï¼Œæˆ‘é€‰æ‹©äº†ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨dnsé‡ŒåŠ æ¡txtè®°å½•ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/dns.png)\nç„¶åä½ å°±å¯ä»¥ç»§ç»­ç­‰å¾…ä»–çš„å›å¤äº†......çœ‹åˆ°ä»–ç»™ä½ è¿™ä¹ˆå›å¤ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/domain-ok.png)\nè¯´æ˜ä½ çš„é—®é¢˜è¢«è§£å†³äº†ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/issue-ok.png)\nå®¡æ‰¹é€šè¿‡åœ¨ä½ ç”³è¯·çš„é‚®ä»¶ç®±ä¸­ä¹Ÿä¼šæ”¶åˆ°é€šè¿‡çš„é‚®ä»¶ã€‚\n\n### é…ç½®gpgåŠ å¯†jaråŒ…ä¸Šä¼ åˆ°æ„ä»¶ä»“åº“é‡Œé¢\n1. å®‰è£…gpg: Macç›´æ¥åœ¨æ§åˆ¶å°`brew install gpg`å³å¯.\n> Windows ç³»ç»Ÿï¼Œå¯ä»¥ä¸‹è½½ Gpg4win è½¯ä»¶æ¥ç”Ÿæˆå¯†é’¥å¯¹ã€‚\n> ä¸‹è½½åœ°å€ï¼šhttps://www.gpg4win.org/download.html\n> æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ: gpg --version\n2. å‘½ä»¤è¡Œç”Ÿæˆç”Ÿæˆç§˜é’¥: `gpg --gen-key`\næŒ‰æç¤ºè¾“å…¥åå­—ï¼Œ å¦‚ï¼šbebee4javaï¼Œé‚®ç®±grsong.cn@gmail,comï¼Œç„¶åé€‰æ‹©(O)kay, è¾“å…¥ï¼šo\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/gen-key.png)\nç„¶åè¦æ±‚è¾“å…¥å¯†ç Passphaseï¼ˆè¾“å…¥ä¸¤æ¬¡ï¼‰ï¼Œç›¸å½“äºå¯†é’¥åº“å¯†ç ï¼Œä¸è¦å¿˜è®°ã€‚\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/passphase.png)\nåˆ°æ­¤å¯†é’¥å°±ç”ŸæˆæˆåŠŸäº†ã€‚\n3. æŸ¥çœ‹å…¬é’¥: `gpg --list-keys`\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/list_keys.png)\nåœ¨æ¡†é€‰çš„ä½ç½®ï¼Œä¼šé¢éœ€è¦ç”¨åˆ°ã€‚\n4. å°†å…¬é’¥å‘å¸ƒåˆ° PGP å¯†é’¥æœåŠ¡å™¨: `gpg --keyserver hkp://keyserver.ubuntu.com:11371 --send-keys ä½ çš„å…¬é’¥`\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/send-keys.png)\n5. æŸ¥è¯¢æ˜¯å¦ä¸ŠæŠ¥æˆåŠŸ: `gpg --keyserver hkp://keyserver.ubuntu.com:11371 --recv-keys ä½ çš„å…¬é’¥`\nå¦‚æœå‡ºç°ä¸‹é¢ï¼Œåˆ«æ€¥å†è¯•ä¸€æ¬¡å°±okäº†ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/recv-keys-err.png)\nè¾“å‡ºä¸‹é¢ä¿¡æ¯è¯´æ˜å‘å¸ƒæˆåŠŸäº†ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/recv-keys-ok.png)\n\n### é…ç½®maven setting.xml\n```xml\n<servers>\n    <server>\n        <id>sonatype-nexus-snapshots</id>\n        <username>sonatypeç”¨æˆ·å</username>\n        <password>sonatypeå¯†ç </password>\n    </server>\n    <server>\n        <id>sonatype-nexus-staging</id>\n        <username>sonatypeç”¨æˆ·å</username>\n        <password>sonatypeå¯†ç </password>\n    </server>\n</servers>\n\n...\n\n<profiles>\n    <profile>\n        <id>nexus-ossrh</id>\n        <activation>\n            <activeByDefault>true</activeByDefault>\n        </activation>\n\n        <properties>\n            <gpg.executable>gpg</gpg.executable>\n            <gpg.passphrase>å¯†é’¥çš„å¯†ç </gpg.passphrase>\n        </properties>\n    </profile>\n</profiles>\n```\n> serverçš„idéšæ„å¡«å†™ï¼Œåªè¦å’Œé¡¹ç›®çš„pom.xmlé‡Œé¢å¯¹åº”å°±è¡Œäº†ã€‚\n\n### é…ç½®é¡¹ç›®pom.xml\n```xml\n<name>common utils</name>\n<url>https://github.com/bebee4java/common-utils</url>\n<description>\n    A common util library for the sqlclub projects\n</description>\n<licenses>\n    <license>\n        <name>Apache 2.0 License</name>\n        <url>http://www.apache.org/licenses/LICENSE-2.0.html</url>\n        <distribution>repo</distribution>\n    </license>\n</licenses>\n<developers>\n    <developer>\n        <id>bebee4java</id>\n        <name>songgongru</name>\n        <email>grsong.cn@gmail.com</email>\n    </developer>\n</developers>\n<scm>\n    <connection>\n        scm:git:git@github.com:bebee4java/common-utils.git\n    </connection>\n    <developerConnection>\n        scm:git:git@github.com:bebee4java/common-utils.git\n    </developerConnection>\n    <url>https://github.com/bebee4java/common-utils</url>\n</scm>\n<issueManagement>\n    <url>https://github.com/bebee4java/common-utils/issues</url>\n</issueManagement>\n<profiles>\n  <profile>\n    <id>release-sign-artifacts</id>\n    <build>\n        <plugins>\n            <!-- GPG -->\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-gpg-plugin</artifactId>\n                <version>1.6</version>\n                <executions>\n                    <execution>\n                        <phase>verify</phase>\n                        <goals>\n                            <goal>sign</goal>\n                        </goals>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n    <distributionManagement>\n        <snapshotRepository>\n            <id>sonatype-nexus-snapshots</id>\n            <url>https://oss.sonatype.org/content/repositories/snapshots/</url>\n        </snapshotRepository>\n        <repository>\n            <id>sonatype-nexus-staging</id>\n            <url>https://oss.sonatype.org/service/local/staging/deploy/maven2/</url>\n        </repository>\n    </distributionManagement>\n  </profile>\n</profiles>\n<build>\n   <plugins>\n      <plugin>\n         <groupId>org.sonatype.plugins</groupId>\n         <artifactId>nexus-staging-maven-plugin</artifactId>\n         <version>1.6.7</version>\n         <extensions>true</extensions>\n         <configuration>\n            <serverId>sonatype-nexus-staging</serverId>\n            <nexusUrl>https://oss.sonatype.org/</nexusUrl>\n            <autoReleaseAfterClose>true</autoReleaseAfterClose>\n         </configuration>\n      </plugin>\n   </plugins>\n</build>\n```\n> æ³¨æ„ï¼šdistributionManagement->repository->id è¦å’Œmaven setting.xml ä¸­çš„ä¿æŒä¸€è‡´ã€‚\n\n### ä¸Šä¼ æ„ä»¶åˆ°OSSä¸­\n\n```bash\nmvn clean deploy -Prelease-sign-artifacts\n```\n> å¦‚æœå‡ºç°é”™è¯¯ï¼šgpg: signing failed: Inappropriate ioctl for device\nåœ¨~/.zshrc æ–‡ä»¶é‡ŒåŠ å…¥export GPG_TTY=$(tty)\n\næ‰“åŒ…è¿‡ç¨‹ä¸­ä¼šè®©ä½ è¾“å…¥PGPçš„å¯†ç ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/gpg-pass.png)\nå‡ºç°ä¸‹é¢ä¸Šä¼ çš„ä¿¡æ¯ï¼Œè¯´æ˜ä½ å·²ç»å¯ä»¥æ­£å¸¸å°†jaråŒ…éƒ¨ç½²åˆ° OSS ä¸­ã€‚\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/deploy-jar.png)\næ³¨æ„ï¼šæ­¤æ—¶ä¸Šä¼ çš„æ„ä»¶å¹¶æœªæ­£å¼å‘å¸ƒåˆ°ä¸­å¤®ä»“åº“ä¸­ï¼Œåªæ˜¯éƒ¨ç½²åˆ° OSS ä¸­äº†ï¼Œåˆ«äººè¿˜ä¸èƒ½å¤Ÿä½¿ç”¨ã€‚\n\n### åœ¨OSSä¸­å‘å¸ƒæ„å»º\n&emsp;&emsp;åœ°å€ï¼šhttps://oss.sonatype.org/#stagingRepositories éœ€è¦ä½¿ç”¨ä¹‹å‰æ³¨å†Œçš„sonatypeè´¦å·ç™»å½•ã€‚\n\n&emsp;&emsp;ç”¨ä½ çš„SonaTypeçš„è´¦å·å¯†ç è¿›è¡Œç™»é™†åï¼Œç‚¹å‡»å·¦è¾¹çš„Staging Repositoriesç„¶åæ ¹æ®æ‰€å†™çš„Group Idè¿›è¡ŒæŸ¥è¯¢ã€‚å¦‚æœåœ¨Staging Repositoriesä¸­æŸ¥æ‰¾ä¸åˆ°ä½ çš„é¡¹ç›®ï¼Œä½†æ˜¯åœ¨[Nexuså…¬æœ‰åº“](https://oss.sonatype.org/index.html)ä¸­æ˜¯å¯ä»¥æŸ¥æ‰¾åˆ°ä½ çš„é¡¹ç›®çš„è¯ã€‚é‚£ä¹ˆè¿™ä¸ªé—®é¢˜å¯ä»¥å¿½ç•¥ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯nexus-staging-maven-pluginæ’ä»¶ä¸­autoReleaseAfterCloseè‡ªåŠ¨è®¾ç½®ä¸ºäº†Trueï¼Œæ‰€ä»¥å°±è‡ªåŠ¨ç»™close->release->dropä¸‰æ­¥ï¼Œç›¸å½“äºè‡ªåŠ¨ç»™ä½ åšäº†ã€‚æ‰€ä»¥ç­‰å¾…ä¸¤ä¸ªå°æ—¶å°±ä¼šåœ¨ä¸­å¤®ä»“åº“æŸ¥æ‰¾åˆ°äº†ã€‚\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/nexus-repo.png)\n\n### é€šçŸ¥Sonatypeæ„ä»¶å·²æˆåŠŸå‘å¸ƒ\n&emsp;&emsp;é€šçŸ¥Sonatypeæ„ä»¶å·²æˆåŠŸå‘å¸ƒï¼Œåœ¨ä¹‹å‰åˆ›å»ºçš„Issueä¸­å›å¤ä¸€æ¡`The component has been successfully released`é€šçŸ¥å·¥ä½œäººå‘˜ä¸ºéœ€è¦å‘å¸ƒçš„æ„ä»¶åšå®¡æ‰¹ï¼Œå‘å¸ƒåä¼šå…³é—­è¯¥Issueã€‚\n\n**é‡åˆ°çš„å‘ï¼š**\n\n&emsp;&emsp;å½“ç¬¬ä¸€æ¬¡è¿›è¡Œä¸Šä¼ çš„æ—¶å€™ï¼Œversionä¸è¦å†™æˆSNAPSHOTçš„ï¼Œå¦‚æœä½ å†™æˆSNAPSHOTç‰ˆæœ¬çš„è¯ï¼Œé‚£ä¹ˆSonartypeç®¡ç†å‘˜ä¼šå›å¤ä½ ä¸‹é¢ä¸€æ®µè¯ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/snapshot-problem.png)\nå¤§æ¦‚æ„æ€æ˜¯åœ¨ç¬¬ä¸€æ¬¡çš„æ—¶å€™ä¸èƒ½ä¸Šä¼ SNAPSHOTåªæœ‰ç¬¬ä¸€æ¬¡æˆåŠŸäº†ä»¥åæ‰å¯ä¸Šä¼ ã€‚\n\nè§£å†³æ–¹æ³•ï¼šä¿®æ”¹versioné‡æ–°deployã€‚å¾ˆå¿«ç®¡ç†å‘˜å°±å›å¤åŒæ­¥å·²ç»å¼€å¯ï¼š\n![](å‘å¸ƒè‡ªå·±çš„é¡¹ç›®JARåˆ°MAVENä¸­å¤®ä»“åº“/central-sync.png)\nçœ‹åˆ°æ•´ä¸ªåŒæ­¥è¿‡ç¨‹éœ€è¦2ä¸ªå°æ—¶å·¦å³ï¼Œè¿˜æ˜¯æŒºæ…¢çš„ğŸ˜‚......\n\n## æ£€æŸ¥åŒæ­¥æ˜¯å¦æˆåŠŸ\n&emsp;&emsp;é™¤äº†é€šè¿‡ [search.maven.org](https://search.maven.org/) æ£€æŸ¥åŒæ­¥æ˜¯å¦æˆåŠŸä¹‹å¤–ï¼ŒæŸ¥è¯¢[mvnrepository](https://mvnrepository.com/search?q=tech.sqlclub)ä¹Ÿæ˜¯å¸¸ç”¨çš„æœç´¢æ–¹å¼ã€‚ä¸è¿‡ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œmvnrepository ç›¸è¾ƒäº search.maven.org åŒæ­¥ä¼šæ›´æ…¢ç‚¹ï¼ŒåŸå› æ˜¯ mvnrepository å¼•ç”¨äº† central.maven.org ä»“åº“ã€‚è€Œ `central.maven.org == repo1.maven.org`ï¼Œä¸¤ä¸ªåŸŸåå¯¹åº”çš„ IP æ˜¯ä¸€æ ·çš„ï¼Œè€Œè¿™ä¸ª repo1.maven.org å°±æ˜¯é»˜è®¤çš„ Maven central repositoryï¼Œä¹Ÿå°±æ˜¯ search.maven.org çš„ä»“åº“ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä¸¤ä¸ªä»“åº“çœ‹åˆ°å‘å¸ƒåŒ…ï¼š\nhttp://central.maven.org/maven2/tech/sqlclub/\nhttp://repo1.maven.org/maven2/tech/sqlclub/\n\n&emsp;&emsp;æ®æˆ‘å®é™…æµ‹è¯•å‘ç°ï¼Œå¤§æ¦‚releaseä¹‹åä¸è¶…è¿‡20åˆ†é’Ÿï¼Œå°±å¯ä»¥åœ¨\nhttps://repo.maven.apache.org/maven2/ è¿™é‡ŒæŸ¥çœ‹åˆ°äº†ï¼Œ\nåªè¦è¿™é‡Œæœ‰äº†ï¼Œåˆ«äººå°±å¯ä»¥ä¾èµ–ä½ æä¾›çš„è¿™ä¸ªjaräº†ã€‚\n\n## ä»¥åå‘å¸ƒè¿‡ç¨‹\n&emsp;&emsp;ç¬¬ä¸€æ¬¡æäº¤æ‰è¿™ä¹ˆéº»çƒ¦,ä»¥åæäº¤åªç”¨é‡å¤mavenå‘å¸ƒ,å½“ç„¶éœ€è¦ç­‰å¾…å¤§æ¦‚2å°æ—¶çš„æ—¶é—´ã€‚\nå¦‚æœè¦å‘å¸ƒæ–°çš„é¡¹ç›®,åœ¨ä½¿ç”¨ç›¸åŒGroupIdçš„æƒ…å†µä¸‹,ä¸ä¸Šé¢çš„è¿‡ç¨‹ä¸€æ ·ã€‚åªæœ‰ä½¿ç”¨ä¸åŒçš„GroupIdçš„æ—¶å€™,æ‰ä¼šéœ€è¦å†å»æäº¤Issueç”³è¯·ã€‚\n&emsp;&emsp;å½“ç„¶å¦‚æœä½ æ²¡æœ‰æ¢ç”µè„‘çš„è¯ GPG çš„è¿‡ç¨‹åªéœ€è¦ä¸€æ¬¡å°±è¡Œã€‚\n","tags":["å·¥ä½œæŠ€èƒ½"],"categories":["å·¥ä½œæŠ€èƒ½"]},{"title":"Javaè®¾è®¡æ¨¡å¼:ç­–ç•¥æ¨¡å¼","url":"%2F2019%2F10%2F22%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%2F","content":"## ç­–ç•¥æ¨¡å¼ç®€ä»‹\n### å®šä¹‰\n> Define a family of algorithms, encapsulate each one, and make them interchangeable. [The] Strategy [pattern] lets the algorithm vary independently from clients that use it.\nç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç»„ç®—æ³•ï¼Œå°†å®ƒä»¬é€ä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥å¯ä»¥è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒä»¬çš„å®¢æˆ·è€Œå˜åŒ–ã€‚\n### æ¨¡å¼ç»“æ„\nç­–ç•¥æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š\n- Contextï¼šä¸Šä¸‹æ–‡ç±»ï¼ŒæŒæœ‰å…·ä½“ç­–ç•¥ç±»çš„å®ä¾‹ï¼Œå¹¶è´Ÿè´£è°ƒç”¨ç›¸å…³çš„ç®—æ³•\n- Strategyï¼šç­–ç•¥æ¥å£æˆ–è€…ç­–ç•¥æŠ½è±¡ç±»\n- ConcreateStrategyAç­‰ï¼šå®ç°ç­–ç•¥æ¥å£çš„å…·ä½“ç­–ç•¥ç±»\n\nç±»å›¾ï¼š\n![](Javaè®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/ç±»å›¾.png)\næ—¶åºå›¾ï¼š\n![](Javaè®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/æ—¶åºå›¾.png)\n\n### ä½¿ç”¨åœºæ™¯\nåœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼š\n\n- å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚\n- ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚\n- å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šçš„è¡Œä¸ºï¼Œå¦‚æœä¸ç”¨æ°å½“çš„æ¨¡å¼ï¼Œè¿™äº›è¡Œä¸ºå°±åªå¥½ä½¿ç”¨å¤šé‡çš„æ¡ä»¶é€‰æ‹©è¯­å¥æ¥å®ç°ã€‚\n- ä¸å¸Œæœ›å®¢æˆ·ç«¯çŸ¥é“å¤æ‚çš„ã€ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œåœ¨å…·ä½“ç­–ç•¥ç±»ä¸­å°è£…ç®—æ³•å’Œç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œæé«˜ç®—æ³•çš„ä¿å¯†æ€§ä¸å®‰å…¨æ€§ã€‚\n\n## å®è·µä¸€ä¸‹\nä¸Šé¢åˆ†æäº†ç­–ç•¥æ¨¡å¼çš„ç»“æ„å’Œæ¦‚å¿µï¼Œä»‹ç»äº†ä½¿ç”¨çš„åœºæ™¯ã€‚ä¸è¿‡å…‰çœ‹è¿™äº›æ¦‚å¿µè¿˜æ˜¯æœ‰äº›ç©ºæ´ï¼Œä¸å¥½ç†å…·ä½“çš„å®ç°é€»è¾‘ã€‚ä¸‹é¢æˆ‘å°†ä»¥å…·ä½“çš„å®ä¾‹æ¥è¯´æ˜ï¼ŒåŠ æ·±å¤§å®¶å¯¹ç­–ç•¥æ¨¡å¼çš„ç†è§£ã€‚\n\nç´§å¼ çš„æœŸæœ«è€ƒè¯•ç»“æŸäº†ï¼Œç­ä¸»ä»»æƒ³çœ‹ä¸‹åŒå­¦ä»¬çš„è¯­æ–‡æˆç»©çš„æ’åæƒ…å†µï¼Œå¦‚æœè®©ä½ æ¥å®ç°è¿™ä¸ªéœ€æ±‚ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿå¾ˆè‡ªç„¶çš„é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰å­¦ç”Ÿè¿™ä¸ªå¯¹è±¡ï¼ŒåŒ…å«å­¦å·ã€è¯­æ–‡æˆç»©ç­‰ç­‰å±æ€§ï¼Œé‚£è¦æ€ä¹ˆå¯¹Studentå¯¹è±¡è¿›è¡Œæ’åºå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“Javaå¯¹è±¡è¦æƒ³è¿›è¡Œå¤§å°æ¯”è¾ƒï¼Œå¯ä»¥å®ç°Comparableæ¥å£ï¼Œå®ç°é‡Œé¢çš„compareToæ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹ä¸¤ä¸ªå­¦ç”Ÿå¯¹è±¡è¿›è¡Œæ¯”è¾ƒäº†ã€‚äºæ˜¯å­¦ç”Ÿç±»å¯ä»¥è¿™ä¹ˆå®ç°ï¼š\n```java\npublic class Student implements Comparable<Student> {\n    // å­¦å·\n    int sid;\n    // è¯­æ–‡æˆç»©\n    int chinese;\n    // æ•°å­¦æˆç»©\n    int math;\n\n    public Student(int sid, int chinese, int math) {\n        this.sid = sid;\n        this.chinese = chinese;\n        this.math = math;\n    }\n    public int compareTo(Student o) {\n        if (this.chinese > o.chinese) return 1;\n        else if (this.chinese < o.chinese) return -1;\n        else return 0;\n    }\n    @Override\n    public String toString() {\n        return \"{sid:\"+sid+\",chinese:\"+chinese+\",math:\"+math+\"}\";\n    }\n}\n```\nå®šä¹‰å¥½å­¦ç”Ÿå¯¹è±¡åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä¸€ä¸ªSorterï¼Œå¯¹å­¦ç”Ÿå¯¹è±¡è¿›è¡Œæ’åºäº†ï¼Œsortæ–¹æ³•(V1)å¯ä»¥è¿™ä¹ˆåšï¼ˆè¿™é‡Œå¯ä»¥å¿½ç•¥æ’åºçš„ç®—æ³•ï¼Œé‡ç‚¹æ˜¯åœ¨è¯´æ˜ç­–ç•¥æ¨¡å¼ï¼‰ï¼š\n```java\n// åªèƒ½å¯¹studentè¿›è¡Œæ’åº\n    public void sort_v1(Student[] arr) {\n        for (int i=0; i<arr.length-1; i++){\n            int minPos = i;\n            for (int j=i+1; j<arr.length; j++){\n                minPos = arr[j].compareTo(arr[minPos]) == -1 ? j : minPos;\n            }\n            swap(arr, i, minPos);\n        }\n    }\n    void swap(Student[] arr, int i, int j) {\n        Student temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n```\næˆ‘ä»¬å¯¹ä¸Šé¢åŠŸèƒ½è¿›è¡Œæµ‹è¯•ï¼š\n```java\npublic class SortApp {\n    public static void main(String[] args) {\n       Student[] arr = {new Student(1, 90, 100),\n               new Student(2, 80, 89),\n               new Student(3, 91, 90)\n       };\n\n       Sorter sorter = new Sorter();\n       sorter.sort(arr);\n       System.out.println(Arrays.toString(arr));\n    }\n}\n```\næ‰§è¡Œä»£ç ï¼Œè¾“å‡ºä¸‹é¢ç»“æœï¼š\n```java\n[{sid:2,chinese:80,math:89}, {sid:1,chinese:90,math:100}, {sid:3,chinese:91,math:90}]\n```\nå¯ä»¥çœ‹åˆ°Studentå·²ç»æŒ‰ç…§chineseæˆç»©è¿›è¡Œå‡åºæ’åˆ—äº†ï¼Œå¾ˆå¥½åˆ°æ­¤å·²ç»å®Œå…¨å®ç°äº†ç­ä¸»ä»»äº¤ç»™ä½ çš„éœ€æ±‚äº†ã€‚\nç¬¬äºŒå¤©ï¼Œç­ä¸»ä»»åˆæ‰¾åˆ°äº†ä½ è¯´ï¼Œæƒ³äº†è§£ä¸€ä¸‹è‡ªå·±ç­çº§åœ¨æ•´ä¸ªå¹´çº§çš„è¯­æ–‡æˆç»©æ’åæƒ…å†µã€‚å¯¹äºç­çº§å¦‚ä½•è¡¡é‡è¯­æ–‡æˆç»©çš„æ°´å¹³å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é‡‡ç”¨è¯­æ–‡æˆç»©çš„å¹³å‡åˆ†è¿›è¡Œæ’åºã€‚ç”±ä¸Šé¢çš„ç»éªŒï¼Œå…ˆå®šä¹‰Classå¯¹è±¡ï¼ŒåŒ…å«ç­çº§ç¼–å·ã€è¯­æ–‡æˆç»©ç­‰ç­‰å±æ€§ï¼š\n```java\npublic class Class implements Comparable<Class> {\n    // ç­çº§ç¼–å·\n    int cid;\n    // è¯­æ–‡å¹³å‡æˆç»©\n    int chinese;\n    // æ•°å­¦å¹³æˆç»©\n    int math;\n\n    public Class(int cid, int chinese, int math) {\n        this.cid = cid;\n        this.chinese = chinese;\n        this.math = math;\n    }\n    public int compareTo(Class o) {\n        if (this.chinese > o.chinese) return 1;\n        else if (this.chinese < o.chinese) return -1;\n        else return 0;\n    }\n    @Override\n    public String toString() {\n        return \"{cid:\"+cid+\",chinese:\"+chinese+\",math:\"+math+\"}\";\n    }\n}\n```\nä¸ºäº†èƒ½å¤ç”¨ä¹‹å‰çš„Sorteræˆ‘ä»¬å¯¹sortæ–¹æ³•è¿›è¡Œæ”¹é€ ï¼Œè®©å…¶æ—¢èƒ½å¯¹Studentæ’åºï¼Œä¹Ÿèƒ½å¯¹Classæ’åºï¼š\n```java\n// èƒ½å¯¹æ‰€æœ‰çš„Comparableå¯¹è±¡è¿›è¡Œæ’åº, ä½†æ˜¯æ¯”è¾ƒæ–¹æ³•ä¸èƒ½ä¿®æ”¹\n    public void sort(Comparable[] arr) {\n        for (int i=0; i<arr.length-1; i++){\n            int minPos = i;\n            for (int j=i+1; j<arr.length; j++){\n                minPos = arr[j].compareTo(arr[minPos]) == -1 ? j : minPos;\n            }\n            swap(arr, i, minPos);\n        }\n    }\n    void swap(Comparable[] arr, int i, int j) {\n        Comparable temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n```\nå¾ˆå¥½ï¼Œæ­¤æ—¶çš„Sorterå¯ä»¥å¯¹ä»»æ„å¯æ¯”è¾ƒçš„å¯¹è±¡ï¼ˆå®ç°äº†Comparableæ¥å£ï¼‰è¿›è¡Œæ’åºäº†ã€‚\n\nåˆ°è¿™Sorterå·²ç»å®Œç¾äº†å˜›ï¼Ÿèªæ˜çš„ä½ åº”è¯¥å·²ç»å‘ç°äº†ï¼Œå­¦ç”Ÿä¸ä»…æœ‰è¯­æ–‡æˆç»©ï¼Œè¿˜æœ‰æ•°å­¦æˆç»©ç­‰ç­‰ã€‚å¦‚æœç­ä¸»ä»»å“ªå¤©æƒ³çœ‹ä¸€ä¸‹å­¦ç”Ÿçš„æ•°å­¦æˆç»©æ’åæ€ä¹ˆåŠï¼Ÿä½ å¯èƒ½æƒ³åˆ°çš„æ–¹å¼æ˜¯æŠŠStudentçš„compareToæ–¹æ³•é‡å†™ä¸€ä¸‹å•Šï¼Œè®©å®ƒæŒ‰ç…§æ•°å­¦æˆç»©è¿›è¡Œæ¯”è¾ƒã€‚è¿™ç¡®å®èƒ½å¤Ÿå®ç°ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯ä¸€ç§å¥½çš„å†™æ³•ã€‚å› ä¸ºç­ä¸»ä»»çš„æƒ³æ³•å¯èƒ½ç»å¸¸ä¼šå˜ï¼Œä½ ä¸å¯èƒ½æ¯æ¬¡éƒ½æ¥ä¿®æ”¹Studentç±»ï¼Œè¿™ä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚\n\nå¥½çš„åšæ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‡ ç§æ¯”è¾ƒçš„ç­–ç•¥ï¼Œæ¯æ¬¡å¯ä»¥æ ¹æ®ç­ä¸»ä»»çš„è¦æ±‚æ¥é€‰æ‹©ç­–ç•¥è¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯æ¥ä¿®æ”¹Studentå¯¹è±¡ã€‚å¯ä»¥é€šè¿‡Javaçš„Comparatoræ¥å£æ¥å®ç°ï¼Œæ‰€ä»¥æœ€ç»ˆçš„Sorterå®ç°æ˜¯ï¼š\n```java\nclass Sorter<T> {\n    public void sort(T[] arr, Comparator<T> comparator) {\n        for (int i=0; i<arr.length-1; i++){\n            int minPos = i;\n            for (int j=i+1; j<arr.length; j++){\n                minPos = comparator.compare(arr[j],arr[minPos]) == -1 ? j : minPos;\n            }\n            swap(arr, i, minPos);\n        }\n    }\n    void swap(T[] arr, int i, int j) {\n        T temp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = temp;\n    }\n}\n```\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¯¹Studentçµæ´»çš„æ ¹æ®è¯­æ–‡ã€æ•°å­¦æˆç»©è¿›è¡Œæ’åºäº†ï¼š\n```java\nStudent[] arr = {new Student(1, 90, 100),\n                new Student(2, 80, 89),\n                new Student(3, 91, 90)\n        };\nnew Sorters<Student>().sort(arr, new Comparator<Student>() {\n            public int compare(Student o1, Student o2) {\n                if (o1.chinese > o2.chinese) return 1;\n                else if (o1.chinese < o2.chinese) return -1;\n                else return 0;\n            }\n        });\n```\nçœ‹åˆ°è¿™ä½ æ˜¯å¦èƒ½æƒ³èµ·æ¥ï¼Ÿå“¦ï¼Javaçš„Collectionså·¥å…·ç±»çš„sortä¸å°±è¿™ä¹ˆå¹²çš„å˜›ã€‚æˆ‘ä»¬æ¥çœ‹ä¸ªä¾‹å­ï¼š\n```java\nList<Integer> list = new ArrayList<Integer>();\nlist.add(3);list.add(1);list.add(2);\nCollections.sort(list, new Comparator<Integer>() {\n    public int compare(Integer o1, Integer o2) {\n        if (o1 > o2) return 1;\n        else if (o1 < o2) return -1;\n        else return 0;\n    }\n});\nSystem.out.println(list);\n```\nå…¶å®è¿™å°±æ˜¯é‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼ã€‚\n\n## æ€»ç»“\nç­–ç•¥æ¨¡å¼æä¾›äº†å¯¹â€œå¼€é—­åŸåˆ™â€çš„å®Œç¾æ”¯æŒï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸæœ‰ç³»ç»Ÿçš„åŸºç¡€ä¸Šé€‰æ‹©ç®—æ³•ï¼ˆç­–ç•¥ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»åœ°å¢åŠ æ–°çš„ç®—æ³•ï¼ˆç­–ç•¥ï¼‰ã€‚å¯ä»¥é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥ã€‚\nä¸è¿‡ç¼ºç‚¹å°±æ˜¯å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ç±»ï¼Œå¹¶è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ã€‚ä¸ºäº†æ›´å¥½çš„ç»„ç»‡æ‰€æœ‰çš„ç­–ç•¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æšä¸¾æ¥æ‰©å±•ï¼š\n```java\nenum StudentStrategyEnum {\n    CHINESE {\n        @Override\n        public Comparator strategy(){\n          return new Comparator<Student>(){\n              public int compare (Student o1, Student o2){\n                  if (o1.chinese > o2.chinese) return 1;\n                  else if (o1.chinese < o2.chinese) return -1;\n                  else return 0;\n              }\n          };\n      }\n    },\n\n    MATH {\n        @Override\n        public Comparator strategy(){\n            return new Comparator<Student>(){\n                public int compare (Student o1, Student o2){\n                    if (o1.math > o2.math) return 1;\n                    else if (o1.math < o2.math) return -1;\n                    else return 0;\n                }\n            };\n        }\n    };\n\n    public abstract Comparator strategy();\n}\n```\næˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆæ¥é€‰æ‹©æ’åºç­–ç•¥ï¼š\n```java\nnew Sorters<Student>().sort(arr, StudentStrategyEnum.MATH.strategy());\n```\nå…¶å®StudentStrategyEnummeæšä¸¾ç±»æœ¬èº«ä¹Ÿé‡‡ç”¨äº†ç­–ç•¥æ¨¡å¼ã€‚éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ã€‚ç­–ç•¥æ¨¡å¼çš„å‡ ä¸ªè¦ç´ ï¼Œåœ¨ç­–ç•¥æšä¸¾é‡Œéƒ½èƒ½æ‰¾åˆ°ã€‚é¦–å…ˆæ˜¯Strategyæ¥å£ï¼Œè¿™é‡Œç”±æŠ½è±¡çš„strategyæ–¹æ³•å……å½“ã€‚è€ŒConcreteStrategyåˆ™ç”±æšä¸¾å€¼CHINESEã€MATHå……å½“ã€‚Contextåˆ™æ˜¯æšä¸¾ç±»æœ¬èº«ï¼Œé€šè¿‡æšä¸¾ç±»é€‰æ‹©ä¸åŒçš„æšä¸¾å€¼ä¹Ÿå°±ç›¸å½“äºé€‰æ‹©ä¸åŒçš„ç­–ç•¥(ç®—æ³•)ã€‚\n\n> æºç åœ°å€ï¼šhttps://github.com/bebee4java/java-design-patterns/tree/master/strategy","tags":["Java"],"categories":["è®¾è®¡æ¨¡å¼"]},{"title":"Javaè®¾è®¡æ¨¡å¼:å•ä¾‹æ¨¡å¼","url":"%2F2019%2F10%2F17%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%2F","content":"## å•ä¾‹æ¨¡å¼ç®€ä»‹\n### å®šä¹‰\nä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®å…¥å£ã€‚ï¼ˆä½ æ˜¯æˆ‘çš„å”¯ä¸€ï½ï½ï¼‰\n### ä¸ºä»€ä¹ˆè¦ç”¨å•ä¾‹æ¨¡å¼å‘¢ï¼Ÿ\n&emsp;&emsp;å…¶å®ç”Ÿæ´»ä¸­å¾ˆå¤šåœ°æ–¹å¯ä»¥ååº”å•ä¾‹æ¨¡å¼ï¼šæ¯”å¦‚ä¸€ä¸ªå›½å®¶åªæœ‰ä¸€ä¸ªæ€»ç»Ÿï¼›ä½ æ­£å¸¸åˆæ³•çš„è€å©†åªèƒ½æœ‰ä¸€ä¸ªï¼Œåˆ«äººå«ä½ è€å©†æ—¶å¿…é¡»åªèƒ½æ˜¯åŒä¸€ä¸ªäººï¼ˆæ’é™¤è¿æ³•æå¤šä¸ªï¼‰ã€‚\n\n&emsp;&emsp;åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€äº›å¯¹è±¡å…¶å®æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæ¯”å¦‚ï¼šçº¿ç¨‹æ± ã€ç¼“å­˜ã€æ³¨å†Œè¡¨ã€æ—¥å¿—å¯¹è±¡ã€å……å½“æ‰“å°æœºã€æ˜¾å¡ç­‰è®¾å¤‡é©±åŠ¨ç¨‹åºçš„å¯¹è±¡ç­‰ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸€ç±»å¯¹è±¡ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¦‚æœåˆ¶é€ å‡ºå¤šä¸ªå®ä¾‹å°±å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜çš„äº§ç”Ÿï¼Œæ¯”å¦‚ï¼šç¨‹åºçš„è¡Œä¸ºå¼‚å¸¸ã€èµ„æºä½¿ç”¨è¿‡é‡ã€æˆ–è€…ä¸ä¸€è‡´æ€§çš„ç»“æœç­‰ã€‚\n\n&emsp;&emsp;ä¸€ä¸ªç®€å•åœºæ™¯å°±æ˜¯ï¼šæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæœ‰ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›åªåœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™è¯»å–è¿™äº›é…ç½®æ–‡ä»¶ï¼Œå¹¶å°†è¿™äº›é…ç½®ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä»¥ååœ¨ç¨‹åºä¸­ä½¿ç”¨è¿™äº›é…ç½®æ–‡ä»¶ä¿¡æ¯çš„æ—¶å€™ä¸å¿…å†é‡æ–°è¯»å–ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚\n\n&emsp;&emsp;ä¸€èˆ¬åœ¨ä¸‹é¢ä¸¤ç§åœºæ™¯ä¸‹ä¼šè€ƒè™‘ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼š\n1. äº§ç”ŸæŸå¯¹è±¡ä¼šæ¶ˆè€—è¿‡å¤šçš„èµ„æºï¼Œä¸ºé¿å…é¢‘ç¹åœ°åˆ›å»ºä¸é”€æ¯å¯¹è±¡å¯¹èµ„æºçš„æµªè´¹ã€‚å¦‚ï¼š\n> å¯¹æ•°æ®åº“çš„æ“ä½œã€è®¿é—® IOã€çº¿ç¨‹æ± ï¼ˆthreadpoolï¼‰ã€ç½‘ç»œè¯·æ±‚ç­‰ã€‚\n2. æŸç§ç±»å‹çš„å¯¹è±¡åº”è¯¥æœ‰ä¸”åªæœ‰ä¸€ä¸ªã€‚å¦‚æœåˆ¶é€ å‡ºå¤šä¸ªè¿™æ ·çš„å®ä¾‹ä¼šä½¿ç¨‹åºå¼‚å¸¸ã€‚å¦‚ï¼š\n> ä¸€ä¸ªç³»ç»Ÿåªèƒ½æœ‰ï¼šä¸€ä¸ªçª—å£ç®¡ç†å™¨æˆ–æ–‡ä»¶ç³»ç»Ÿï¼Œè®¡æ—¶å·¥å…·æˆ– IDï¼ˆåºå·ï¼‰ç”Ÿæˆå™¨ï¼Œç¼“å­˜ï¼ˆcacheï¼‰ï¼Œå¤„ç†åå¥½è®¾ç½®å’Œæ³¨å†Œè¡¨ï¼ˆregistryï¼‰çš„å¯¹è±¡ï¼Œæ—¥å¿—å¯¹è±¡ã€‚\n\n&emsp;&emsp;ç®€å•æ¥è¯´ä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥å¸¦æ¥ä¸‹é¢å‡ ä¸ªå¥½å¤„ï¼š\n1. å¯¹äºé¢‘ç¹ä½¿ç”¨çš„å¯¹è±¡ï¼Œå¯ä»¥èŠ‚çœåˆ›å»ºå¯¹è±¡æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œè¿™å¯¹äºé‚£äº›é‡é‡çº§å¯¹è±¡è€Œè¨€ï¼Œæ˜¯éå¸¸å¯è§‚çš„ä¸€ç¬”ç³»ç»Ÿå¼€é”€ï¼›\n2. ç”±äºnewæ“ä½œçš„æ¬¡æ•°å‡å°‘ï¼Œå› è€Œå¯¹ç³»ç»Ÿå†…å­˜çš„ä½¿ç”¨é¢‘ç‡ä¹Ÿä¼šé™ä½ï¼Œè¿™å°†å‡è½» GC å‹åŠ›ï¼Œç¼©çŸ­ GC åœé¡¿æ—¶é—´ã€‚\n\n## å®ç°æ–¹å¼\n&emsp;&emsp;å•ä¾‹æ¨¡å¼ï¼ŒæŒ‰åŠ è½½æ—¶æœºå¯ä»¥åˆ†ä¸ºï¼šé¥¿æ±‰æ–¹å¼å’Œæ‡’æ±‰æ–¹å¼ï¼›æŒ‰å®ç°çš„æ–¹å¼ï¼Œæœ‰ï¼šåŒé‡æ£€æŸ¥åŠ é”ï¼Œå†…éƒ¨ç±»æ–¹å¼å’Œæšä¸¾æ–¹å¼ç­‰ç­‰ã€‚å®ƒä»¬æœ‰çš„æ•ˆç‡å¾ˆé«˜ï¼Œæœ‰çš„èŠ‚çœå†…å­˜ï¼Œæœ‰çš„å®ç°å¾—ç®€å•æ¼‚äº®ï¼Œè¿˜æœ‰çš„å­˜åœ¨ä¸¥é‡ç¼ºé™·ï¼Œå¤§éƒ¨åˆ†ä½¿ç”¨çš„æ—¶å€™éƒ½æœ‰é™åˆ¶æ¡ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸‹å„ç§å†™æ³•çš„åŒºåˆ«ï¼Œè¾¨åˆ«å“ªäº›æ˜¯ä¸å¯è¡Œçš„ï¼Œå“ªäº›æ˜¯æ¨èçš„ï¼Œæœ€åä¸ºå¤§å®¶ç­›é€‰å‡ºå‡ ä¸ªå€¼å¾—æˆ‘ä»¬é€‚æ—¶åº”ç”¨åˆ°é¡¹ç›®ä¸­çš„å®ç°æ–¹å¼ã€‚\n\n### é¥¿æ±‰æ¨¡å¼\n&emsp;&emsp;æ‰€è°“é¥¿æ±‰æ¨¡å¼å°±æ˜¯æŒ‡å…¨å±€çš„å•ä¾‹å®ä¾‹åœ¨ç±»è£…è½½æ—¶æ„å»ºã€‚ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼šå¦ˆå¦ˆæ—©ä¸Šèµ·æ¥ä¸ºæˆ‘ä»¬åšé¥­åƒï¼Œé¥­å¿«åšå¥½çš„æ—¶å€™ï¼Œä¸€èˆ¬éƒ½ä¼šå«æˆ‘ä»¬èµ·åºŠåƒé¥­ï¼Œè¿™æ˜¯æ—¥å¸¸æƒ…å†µã€‚å¦‚æœé¥­è¿˜æ²¡æœ‰å¥½çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è‡ªå·±èµ·æ¥äº†ï¼ˆè¿™æ—¶å€™å¦ˆå¦ˆè¿˜æ²¡æœ‰å«æˆ‘ä»¬èµ·åºŠï¼‰ï¼Œè¿™ç§æƒ…å†µåœ¨å•ä¾‹æ¨¡å¼ä¸­ç§°ä¹‹ä¸ºé¥¿æ±‰å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¦ˆå¦ˆè¿˜æ²¡æœ‰å«æˆ‘ä»¬èµ·åºŠï¼Œæˆ‘ä»¬è‡ªå·±å°±èµ·æ¥çš„ï¼Œå°±æ˜¯å¤–éƒ¨è¿˜æ²¡æœ‰è°ƒç”¨è‡ªå·±ï¼Œè‡ªå·±çš„å®ä¾‹å°±å·²ç»åˆ›å»ºå¥½äº†ã€‚\n\n<details>\n```java\npublic class HungryPresident {\n\n    private static final HungryPresident INSTANCE = new HungryPresident();\n\n    // ç§æœ‰åŒ–æ„é€ æ–¹æ³•\n    private HungryPresident(){\n\n    }\n\n    public static HungryPresident getInstance() {\n        System.out.println(\"getInstance\");\n        return INSTANCE;\n    }\n}\n```\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. ç®€å•å®ç”¨ï¼Œæ¯”è¾ƒæ¨èã€‚\n2. ç±»åŠ è½½åˆ°å†…å­˜åï¼Œåªå®ä¾‹åŒ–ä¸€ä¸ªå®ä¾‹ï¼ŒJVMä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸ç”¨åŒæ­¥ï¼Œè¿è¡Œæ•ˆç‡é«˜ã€‚\n3. å®ä¾‹ä¸ç®¡åç»­æœ‰æ²¡æœ‰ä½¿ç”¨ï¼Œç±»åŠ è½½å®Œå°±å®Œæˆå®ä¾‹åŒ–ï¼Œå¤–éƒ¨ä¸€ç›´æ²¡æœ‰è°ƒç”¨è¯¥å®ä¾‹ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†çš„ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ä½†è¯è¯´å¦‚æœè¿™ä¸ªç±»ä¸ç”¨çš„è¯ï¼Œä½ ä¹Ÿæ²¡å¿…è¦åŠ è½½å‘€ã€‚\n\n> ä»£ç æµ‹è¯•éªŒè¯ï¼š\n> ![](Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼/markdown-img-paste-20191021154529932.png)\n\n### æ‡’æ±‰æ¨¡å¼\n&emsp;&emsp;æ‰€è°“çš„æ‡’æ±‰æ¨¡å¼ï¼Œå°±æ˜¯ä¸€å¼€å§‹å¹¶ä¸å®ä¾‹åŒ–å¯¹è±¡ï¼Œç­‰åˆ°éœ€è¦ä½¿ç”¨çš„æ—¶å€™æ‰å®ä¾‹åŒ–ã€‚è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœé¥­åšå¥½äº†ï¼Œå¦ˆå¦ˆå«æˆ‘ä»¬èµ·åºŠä¹‹åï¼Œæˆ‘ä»¬æ‰æ…¢ååçš„èµ·åºŠï¼Œè¿™ç§æƒ…å†µåœ¨å•ä¾‹æ¨¡å¼ä¸­ç§°ä¹‹ä¸ºæ‡’æ±‰å¼ï¼ˆé¥­éƒ½åšå¥½äº†ï¼Œå¦ˆå¦ˆå«ä½ èµ·åºŠä¹‹åï¼Œè‡ªå·±æ‰èµ·çš„ï¼Œèƒ½ä¸æ‡’æ±‰å—ï¼Ÿå°±æ˜¯å¤–éƒ¨å¯¹è¯¥ç±»çš„æ–¹æ³•å‘å‡ºè°ƒç”¨ä¹‹åï¼Œè¯¥å®ä¾‹æ‰å»ºç«‹çš„ï¼‰ã€‚\n<details>\n```java\npublic class LazyLoadPresident {\n\n    private static LazyLoadPresident INSTANCE;\n\n    private LazyLoadPresident() {\n\n    }\n\n    public static LazyLoadPresident getInstance() {\n\n        if (INSTANCE == null) {\n            System.out.println(\"getInstance\");\n            INSTANCE = new LazyLoadPresident();\n        }\n\n        return INSTANCE;\n    }\n}\n```\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. å®ä¾‹åœ¨è¢«ä½¿ç”¨çš„æ—¶å€™æ‰è¢«åˆ›å»ºï¼Œå¯ä»¥èŠ‚çœç³»ç»Ÿèµ„æºï¼Œä½“ç°äº†å»¶è¿ŸåŠ è½½çš„æ€æƒ³ã€‚\n2. å¤šçº¿ç¨‹ä¸‹ï¼Œå®ä¾‹ä¸èƒ½ä¿è¯åªæœ‰ä¸€ä¸ªï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚\n\n> ä»£ç æµ‹è¯•éªŒè¯ï¼š\n> ![](Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼/markdown-img-paste-20191021153411447.png)\n\n<font color=red>é‚£å¦‚ä½•å°†æ‡’æ±‰å¼å•ä¾‹åœ¨å¤šçº¿ç¨‹ä¸‹æ­£ç¡®çš„å‘æŒ¥ä½œç”¨å‘¢ï¼Ÿ</font>\n\nå¯ä»¥åœ¨è®¿é—®å•ä¾‹å®ä¾‹çš„æ–¹æ³•å¤„è¿›è¡ŒåŒæ­¥ï¼š\n<details>\n```java\npublic class ThreadSafeLazyLoadPresident {\n\n    private static ThreadSafeLazyLoadPresident INSTANCE;\n\n    private ThreadSafeLazyLoadPresident() {\n\n    }\n\n    public static synchronized ThreadSafeLazyLoadPresident getInstance() {\n        if (INSTANCE == null) {\n            System.out.println(\"getInstance\");\n            INSTANCE = new ThreadSafeLazyLoadPresident();\n        }\n        return INSTANCE;\n    }\n}\n```\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. å¯ä»¥æ­£ç¡®æŒ‰éœ€è¿”å›å•ä¾‹å¯¹è±¡ï¼Œçº¿ç¨‹å®‰å…¨\n2. æ¯æ¬¡è·å–å¯¹è±¡éƒ½å¾—åŠ é”ï¼Œåœ¨é¢‘ç¹è·å–å¯¹è±¡æ“ä½œä¸‹ï¼Œæ•ˆç‡å¤ªä½\n\n> ä»£ç æµ‹è¯•éªŒè¯ï¼š\n> ![](Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼/markdown-img-paste-20191021202039812.png)\n\n### åŒé‡æ£€æŸ¥åŠ é”å¼\n&emsp;&emsp;ä¸Šé¢æ‡’æ±‰æ¨¡å¼ç›´æ¥åœ¨æ•´ä¸ªæ–¹æ³•ç”¨äº†synchronizedå…³é”®å­—è¿›è¡Œæ–¹æ³•åŒæ­¥ï¼Œé”çš„ç²’åº¦å¤ªå¤§ã€‚åŒé‡æ ¡éªŒæ–¹å¼å°±æ˜¯ä¸ºäº†è§£å†³æ‡’æ±‰æ¨¡å¼çš„çº¿ç¨‹å®‰å…¨å’Œæ•ˆç‡é—®é¢˜è€Œäº§ç”Ÿçš„ã€‚\n<details>\n```java\npublic class ThreadSafeDoubleCheckPresident {\n\n    // å¿…é¡»åŠ volatile\n    private static volatile ThreadSafeDoubleCheckPresident INSTANCE;\n\n    private ThreadSafeDoubleCheckPresident() {\n\n    }\n\n    public static ThreadSafeDoubleCheckPresident getInstance() {\n        if (INSTANCE == null) {  // è¿™å±‚åˆ¤æ–­æ˜¯æœ‰å¿…è¦çš„ å¤§å¤šæ•°æƒ…å†µä¸‹INSTANCEä¸ä¸ºnullç›´æ¥è¿”å›äº†ï¼Œå‡å°‘äº†åŠ é”çš„æ“ä½œ\n            System.out.println(\"getInstance\");\n            synchronized (ThreadSafeDoubleCheckPresident.class) {\n                if (INSTANCE == null) {\n                    INSTANCE = new ThreadSafeDoubleCheckPresident();\n                }\n            }\n        }\n\n        return INSTANCE;\n    }\n\n}\n```\n> æ³¨ï¼š\n> ä¸‹é¢è§£é‡Šä¸€ä¸‹ä¸ºå•¥ instance å˜é‡è¦å£°æ˜æˆ volatile\n> åŸå› æ˜¯instance = new ThreadSafeDoubleCheckPresident() è¿™ä¸€è¡Œä»£ç å¹¶ä¸æ˜¯åŸå­æ€§çš„ï¼Œå…·ä½“æ¥è¯´ï¼ŒJVMæ‰§è¡Œè¿™ä¸€è¡Œä»£ç æ—¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š\n> 1.ç»™ instance åˆ†é…å†…å­˜ç©ºé—´\n> 2.è°ƒç”¨ ThreadSafeDoubleCheckPresident çš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡\n> 3.å°† instance å˜é‡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ‰§è¡Œå®Œè¿™ä¸€æ­¥ä¹‹å instance å°±ä¸ä¸º null äº†ï¼‰\n> ç”±äº JVM çš„æŒ‡ä»¤ä¼˜åŒ–å­˜åœ¨ï¼Œä¸Šé¢çš„ç¬¬äºŒç‚¹å’Œç¬¬ä¸‰ç‚¹å¹¶ä¸èƒ½ä¿è¯ä¸€å®šæŒ‰é¡ºåºæ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´æ‰§è¡Œé¡ºåºæœ‰å¯èƒ½ä¸º 1-2-3 æˆ–è€… 1-3-2\n> å‡è®¾æ˜¯ 1-3-2ï¼Œé‚£ä¹ˆå¦‚æœæ‰§è¡Œåˆ°3çš„æ—¶å€™ï¼Œçº¿ç¨‹è¢«æŠ¢å äº†ï¼Œæœ‰å¦å¤–ä¸€ä¸ªçº¿ç¨‹è·å–äº†å•ä¾‹å¯¹è±¡ï¼ˆè¿™æ—¶å€™ instance ä¸ä¸º nullï¼Œä½†æ˜¯è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼‰ï¼Œé‚£ä¹ˆè‡ªç„¶å°±ä¼šå‡ºç°é”™è¯¯ã€‚\n> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åªè¦å°† instance å˜é‡å£°æ˜æˆ volatile å°±å¯ä»¥äº†ã€‚\n> volatile å…³é”®å­—ä¸»è¦æœ‰ä¸¤ä¸ªç‰¹æ€§ï¼š\n> 1.å¯è§æ€§ï¼šä¿è¯çº¿ç¨‹æ²¡æœ‰å˜é‡çš„æœ¬åœ°å‰¯æœ¬ï¼Œæ¯æ¬¡éƒ½å»ä¸»å†…å­˜è·å–æœ€æ–°ç‰ˆæœ¬\n> 2.ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼šç”Ÿæˆå†…å­˜å±éšœ\n> å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬è¿™é‡Œåˆ©ç”¨çš„æ˜¯ volatile çš„ç¬¬äºŒä¸ªç‰¹æ€§ã€‚\n> ç‰¹åˆ«æ³¨æ„çš„æ˜¯åªæœ‰åœ¨ Java 5 ä¹‹åä½¿ç”¨è¿™ç§æ–¹å¼æ‰æ˜¯å®Œå…¨å®‰å…¨çš„ï¼ŒåŸå› æ˜¯ Java 5 ä¹‹å‰çš„ Java å†…å­˜æ¨¡å‹ï¼ˆJava Memory Modelï¼ŒJMMï¼‰å­˜åœ¨ç¼ºé™·ï¼Œå³ä½¿å˜é‡å£°æ˜ä¸º volatile ä¹Ÿä¸èƒ½å®Œå…¨é¿å…é‡æ’åºï¼Œè¿™ä¸ªé—®é¢˜åœ¨ Java 5 ä¹‹åæ‰ä¿®å¤ã€‚\n\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. å¯ä»¥æ­£ç¡®æŒ‰éœ€è¿”å›å•ä¾‹å¯¹è±¡ï¼Œçº¿ç¨‹å®‰å…¨\n2. ä¸å¤Ÿç®€æ´ï¼Œä¸å¥½ç†è§£\n\n### é™æ€å†…éƒ¨ç±»å¼\n&emsp;&emsp;é™æ€å†…éƒ¨å®ç°çš„å•ä¾‹æ˜¯æ‡’åŠ è½½çš„ä¸”çº¿ç¨‹å®‰å…¨ã€‚æ ¹æ®JVMçš„ç±»åŠ è½½è§„åˆ™ï¼Œé™æ€å†…éƒ¨ç±»åªæœ‰åœ¨ä¸»åŠ¨è°ƒç”¨çš„æ—¶å€™æ‰ä¼šåŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ getInstance() æ–¹æ³•æ—¶æ‰ä¼šåŠ è½½ SingletonHolder ç±»ï¼ŒåŒæ—¶åˆ›å»ºäº† INSTANCE å¯¹è±¡ã€‚\n<details>\n```java\npublic class InitializingOnDemandHolderPresident {\n\n    private InitializingOnDemandHolderPresident(){\n\n    }\n\n    // å¯ä»¥åšåˆ°å»¶è¿ŸåŠ è½½\n    private static class SingletonHolder {\n        private static final InitializingOnDemandHolderPresident INSTANCE =\n                new InitializingOnDemandHolderPresident();\n    }\n\n    public static InitializingOnDemandHolderPresident getInstance() {\n        return SingletonHolder.INSTANCE;\n    }\n\n}\n```\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. æ‡’åŠ è½½çš„ä¸”çº¿ç¨‹å®‰å…¨ï¼Œè§£å†³å ç”¨å†…å­˜é—®é¢˜\n2. æ— æ³•é˜»æ­¢åå°„ã€åºåˆ—åŒ–æ”»å‡»\n\n### æšä¸¾ç±»å¼\n&emsp;&emsp;è¿™ç§å®ç°æ–¹å¼æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è¿™æ˜¯å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚ å®ƒæ›´ç®€æ´ï¼Œè‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚å…¶å®ä¸Šé¢æ‰€è¯´çš„å®ç°æ–¹å¼éƒ½å­˜åœ¨ç¼ºé™·ï¼Œå°±æ˜¯æ— æ³•é˜»æ­¢é€šè¿‡åå°„ã€åºåˆ—åŒ–çš„æ–¹å¼åˆ›å»ºå‡ºå¤šä¸ªå®ä¾‹ï¼Œåªæœ‰æšä¸¾è¿™ç§å½¢å¼å¯ä»¥åšåˆ°ã€‚\n<details>\n```java\npublic enum  EnumPresident {\n    INSTANCE;\n\n    public void run(){\n        System.out.println(\"EnumPresident run ...\");\n    }\n\n}\n```\n**ä¼˜ç¼ºç‚¹ï¼š**\n1. ç®€æ´ã€çº¿ç¨‹å®‰å…¨ã€ç»å¯¹å•ä¾‹\n2. æŠŠä¸€ä¸ªç±»å®šä¹‰æˆæšä¸¾å½¢å¼ä¸Šæœ‰ç‚¹åˆ«æ‰­\n\n## æ€»ç»“\næ–‡ç« ä¸»è¦ä»‹ç»åˆ°äº†ä»¥ä¸‹å‡ ç§æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ï¼š\n- é¥¿æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼‰\n- æ‡’æ±‰å¼ï¼ˆéçº¿ç¨‹å®‰å…¨å’Œsynchronizedå…³é”®å­—çº¿ç¨‹å®‰å…¨ç‰ˆæœ¬)\n- æ‡’æ±‰å¼(åŒé‡æ£€æŸ¥åŠ é”ç‰ˆæœ¬)\n- æ‡’æ±‰å¼ï¼ˆé™æ€å†…éƒ¨ç±»æ–¹å¼ï¼‰\n- é¥¿æ±‰å¼ï¼ˆæšä¸¾æ–¹å¼ï¼‰\n\nJDKä¸­ä¹Ÿæœ‰ç›¸åŒæ–¹å¼çš„å•ä¾‹å®ç°ç±»å¦‚ï¼š\n- java.lang.Runtime.getRuntime()\n- java.awt.Desktop.getDesktop()\n- java.lang.System.getSecurityManager()\n\næ¯ç§æ–¹å¼éƒ½å­˜åœ¨ä¼˜ç¼ºç‚¹ï¼Œå€¼å¾—ä¸€è¯´çš„æ˜¯ï¼Œç»å¤§éƒ¨åˆ†åœºæ™¯ä¸­ç›´æ¥ä½¿ç”¨ç¬¬ä¸€ç§é¥¿æ±‰å¼å°±å¯ä»¥ï¼Œå®ƒè¶³å¤Ÿç®€å•ï¼Œä¹Ÿèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåªè¦ä½ å¯ä»¥å®¹å¿å®ƒåœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºæ‰€æ¶ˆè€—çš„ç³»ç»Ÿèµ„æºã€‚\n> æºç åœ°å€ï¼šhttps://github.com/bebee4java/java-design-patterns/tree/master/singleton\n","tags":["Java"],"categories":["è®¾è®¡æ¨¡å¼"]},{"title":"Javaè®¾è®¡æ¨¡å¼å‰–æ","url":"%2F2019%2F10%2F11%2FJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%89%96%E6%9E%90%2F","content":"&emsp;&emsp;ä¸€ç›´æƒ³å†™ä»‹ç»è®¾è®¡æ¨¡å¼çš„æ–‡ç« ï¼Œè®©è¯»è€…å¯ä»¥å¾ˆå¿«çœ‹å®Œï¼Œè€Œä¸”ä¸€çœ‹å°±æ‡‚ï¼Œçœ‹æ‡‚å°±ä¼šç”¨ï¼ŒåŒæ—¶ä¸ä¼šå°†å„ä¸ªæ¨¡å¼ææ··ã€‚å½“ç„¶è¿™ä¸ªéœ€è¦æœ‰ä¸€å®šçš„ç¼–ç¨‹ç»éªŒæ‰èƒ½åšåˆ°ã€‚è‡ªå·±è™½ç„¶ä¸å¤Ÿnbï¼Œä½†ä¹Ÿç§¯ç´¯äº†ä¸€äº›ç»éªŒï¼Œæ˜¯æ—¶å€™å†™ç‚¹ä¸œè¥¿äº†ï¼Œä¹Ÿç®—æ˜¯è‡ªæˆ‘çš„æ€»ç»“ã€‚æ‰€ä»¥æ–‡ä¸­å¯èƒ½ä¹Ÿå­˜åœ¨ä¸€äº›çº°æ¼ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€æŒ‡æ­£ã€‚\n\n&emsp;&emsp;è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—åº”è¯¥è¢«åå¤ä½¿ç”¨çš„ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯å¤ç”¨ä»£ç ã€è®©ä»£ç æ›´æ˜“ç†è§£ã€ä¿è¯ä»£ç çš„å¯é æ€§ã€‚\n\n&emsp;&emsp;æˆ‘çŸ¥é“å¤§å®¶ï¼ˆåŒ…æ‹¬æˆ‘åœ¨å†…ï¼‰åœ¨å†™ä»£ç çš„æ—¶å€™å¯èƒ½ä¸ä¼šé‚£ä¹ˆåˆ»æ„çš„å»ä½¿ç”¨ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯å®ƒç»å¯¹æ˜¯å€¼å¾—ä½ å»æ€è€ƒå¹¶ä½¿ç”¨çš„ä¸€å¥—ç†è®ºã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾çš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œå¹¶ä½¿ä½ èµ°å‘ä¼˜ç§€ä»£ç çš„é“è·¯ã€‚\n\n&emsp;&emsp;æˆ‘æ¥ä¸‹æ¥çš„å‡ ç¯‡æ–‡ç« ä¼šä»¥ç†è®ºä¸å®è·µç›¸ç»“åˆçš„æ–¹å¼æ¥è¿›è¡Œæ€»ç»“ï¼Œå¸Œæœ›å¹¿å¤§ç¨‹åºçˆ±å¥½è€…å’Œæˆ‘ä¸€èµ·ï¼Œå­¦å¥½è®¾è®¡æ¨¡å¼ï¼Œåšä¸€ä¸ªä¼˜ç§€çš„è½¯ä»¶å·¥ç¨‹å¸ˆï¼\n\n## è®¾è®¡æ¨¡å¼å…­å¤§åŸåˆ™\nå­¦ä¹ è®¾è®¡æ¨¡å¼ä¹‹å‰æœ€å¥½å…ˆäº†è§£ä¸€ä¸‹è®¾è®¡æ¨¡å¼çš„è®¾è®¡åŸåˆ™ï¼š\n1. å¼€é—­åŸåˆ™ï¼ˆopen close principleï¼‰\n  å¼€æ”¾å³æŒ‡å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æ‰©å±•åŠŸèƒ½çš„æ—¶å€™åº”è¯¥å°½é‡çš„ä¸ä¿®æ”¹åŸæœ‰çš„ä»£ç ã€‚\n2. é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆliskov substitution principleï¼‰\n  å¯ä»¥ç†è§£ä¸ºæ´¾ç”Ÿç±»ä¸åŸºç±»çš„æ›¿æ¢å…³ç³»ï¼Œæ˜¯å¯¹\"å¼€-é—­\"åŸåˆ™çš„è¡¥å……ã€‚é€šä¿—æ¥è®²å°±æ˜¯ï¼šå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œé™¤æ·»åŠ æ–°çš„æ–¹æ³•å®Œæˆæ–°å¢åŠŸèƒ½å¤–ï¼Œå°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚\n3. ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆdependence inverse principleï¼‰\n  è¿™ä¸ªåŸåˆ™æ˜¯å¼€é—­åŸåˆ™çš„åŸºç¡€ï¼Œå…·ä½“å†…å®¹ï¼šé’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·ä½“ã€‚ç›®çš„æ˜¯é€šè¿‡è¦é¢å‘æ¥å£çš„ç¼–ç¨‹æ¥é™ä½ç±»é—´çš„è€¦åˆæ€§ã€‚ç¬¦åˆé«˜å†…èšä½è€¦åˆåŸåˆ™ã€‚\n4. æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰\n  ä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ï¼Œæ ¸å¿ƒå°±æ˜¯æ§åˆ¶ç±»çš„ç²’åº¦å¤§å°ã€å°†å¯¹è±¡è§£è€¦ã€æé«˜å…¶å†…èšæ€§ã€‚\n5. è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰\n  ä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜äº†æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚\n6. åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰\n  å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚\n\n## è®¾è®¡æ¨¡å¼ç±»å‹\n&emsp;&emsp;æ ¹æ®è®¾è®¡æ¨¡å¼çš„å‚è€ƒä¹¦[Design Patterns - Elements of Reusable Object-Oriented Software](DesignPatterns.pdf)ï¼ˆä¸­æ–‡è¯‘åï¼šè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼Œç”±GOFå››äººå¸®åˆè‘—ï¼‰ ä¸­æ‰€æåˆ°çš„ï¼Œæ€»å…±æœ‰ 23 ç§è®¾è®¡æ¨¡å¼ã€‚è¿™äº›æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructural Patternsï¼‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ã€‚\n### åˆ›å»ºå‹æ¨¡å¼\néšè—åˆ›å»ºå¯¹è±¡çš„åˆ›å»ºé€»è¾‘ï¼Œæä¾›åˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè€Œéä½¿ç”¨newå…³é”®å­—è¿›è¡Œåˆ›å»ºã€‚\n* [å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰](/2019/10/17/Javaè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼/)\n* å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰\n* æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰\n* å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰\n* åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰\n\n### ç»“æ„å‹æ¨¡å¼\nè¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚\n* é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰\n* æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰\n* è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰\n* ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰\n* è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰\n* å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰\n* äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰\n* ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰\n\n### è¡Œä¸ºå‹æ¨¡å¼\nè¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚\n* è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰\n* å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰\n* è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰\n* è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰\n* ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰\n* å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰\n* è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰\n* çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰\n* ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰\n* ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰\n* æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰\n* è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰\n\nè®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾æ•´ä½“æè¿°ï¼š\n![](Javaè®¾è®¡æ¨¡å¼å‰–æ/markdown-img-paste-2019101121061240.png)\n\n&emsp;&emsp;è¯¥æ–‡ä¸»è¦ä»‹ç»ä¸€äº›åŸºæœ¬æ¦‚å¿µå’Œç†è®ºçŸ¥è¯†ï¼Œåç»­æ–‡ç« ä¼šç»“åˆä»£ç çš„å½¢å¼è¯¦ç»†ä»‹ç»æ¯ç§è®¾è®¡æ¨¡å¼ä½¿ç”¨æ–¹å¼ï¼Œå¦‚æœä½ ç€æ€¥å…³æ³¨å®é™…çš„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è·³è½¬æŸä¸€ç§è®¾è®¡æ¨¡å¼å•ç‹¬äº†è§£ï¼Œä¸å¿…è¦æŒ‰é¡ºåºé˜…è¯»ã€‚\n","tags":["Java"],"categories":["è®¾è®¡æ¨¡å¼"]},{"title":"condaä½¿ç”¨æŠ€å·§æ€»ç»“","url":"%2F2019%2F10%2F10%2Fconda%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93%2F","content":"## åˆ›å»ºç¯å¢ƒ\nåˆ›å»ºä¸€ä¸ªåä¸ºpy35çš„ç¯å¢ƒï¼ŒæŒ‡å®šPythonç‰ˆæœ¬æ˜¯3.5ï¼ˆä¸ç”¨ç®¡æ˜¯3.5.xï¼Œcondaä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨å¯»æ‰¾3.ï¼•.xä¸­çš„æœ€æ–°ç‰ˆæœ¬ï¼‰\n```python\nconda create --name py35 python=3.5\n```\n\n## æ¿€æ´»ç¯å¢ƒ\næ¿€æ´»py35ç¯å¢ƒ\n```python\nsource activate py35\n```\n\n## è¿”å›ä¸»ç¯å¢ƒ\n```python\nsource deactivate py35\n```\n\n## åˆ é™¤ç¯å¢ƒ\nåˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç¯å¢ƒ\n```python\nconda remove --name py35 --all\n```\n\n## æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç¯å¢ƒ\n```python\nconda info -e\n```\n\n## å®‰è£…åº“\n```python\nconda install numpy\n```\n\n## æŸ¥çœ‹å·²ç»å®‰è£…çš„åº“\n```python\nconda list\n```\n\n## æœç´¢packageçš„ä¿¡æ¯\n```python\nconda search numpy\n```\n\n## å®‰è£…packageåˆ°æŒ‡å®šçš„ç¯å¢ƒ\nå¦‚æœä¸ç”¨-næŒ‡å®šç¯å¢ƒåç§°ï¼Œåˆ™è¢«å®‰è£…åœ¨å½“å‰æ´»è·ƒç¯å¢ƒï¼Œä¹Ÿå¯ä»¥é€šè¿‡-cæŒ‡å®šé€šè¿‡æŸä¸ªchannelå®‰è£…\n```python\nconda install -n py35 numpy\n```\n\n## æ›´æ–°package\n```python\nconda update -n py35 numpy\n```\n\n## åˆ é™¤package\n```python\nconda remove -n py35 numpy\n```\n\n## è®¾ç½®å›½å†…é•œåƒï¼ŒåŠ é€Ÿconda\nåœ¨Userä¸»ç›®å½•ä¸‹ç”Ÿæˆ.condarcæ–‡ä»¶ï¼Œåˆ æ‰channelsä¸‹é¢çš„ -defaultsä¸€è¡Œ,ä½¿å…¶ä¸å†è®¿é—®é»˜è®¤channel\n```python\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\n\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\n\nconda config --set show_channel_urls yes\n```\n","tags":["python"],"categories":["python"]},{"title":"mysqlåˆ›å»ºç”¨æˆ·ä¸æˆæƒ","url":"%2F2019%2F10%2F09%2Fmysql%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E4%B8%8E%E6%8E%88%E6%9D%83%2F","content":"## åˆ›å»ºç”¨æˆ·\n```sql\nCREATE USER 'username'@'host' IDENTIFIED BY 'password';\n```\n> è¯´æ˜:\n> usernameï¼šä½ å°†åˆ›å»ºçš„ç”¨æˆ·å\n> hostï¼šæŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œå¦‚æœæ˜¯æœ¬åœ°ç”¨æˆ·å¯ç”¨localhostï¼Œå¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥ä»ä»»æ„è¿œç¨‹ä¸»æœºç™»é™†ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦`%`\n> passwordï¼šè¯¥ç”¨æˆ·çš„ç™»é™†å¯†ç ï¼Œå¯†ç å¯ä»¥ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™è¯¥ç”¨æˆ·å¯ä»¥ä¸éœ€è¦å¯†ç ç™»é™†æœåŠ¡å™¨\n> ä¾‹å­ï¼š\n```sql\nCREATE USER 'pig'@'localhost' IDENTIFIED BY '123456';\nCREATE USER 'pig'@'%' IDENTIFIED BY '123456';\nCREATE USER 'pig'@'%' IDENTIFIED BY '';\nCREATE USER 'pig'@'%';\n```\n\n## ç”¨æˆ·æˆæƒ\n```sql\nGRANT privileges ON databasename.tablename TO 'username'@'host'\n```\n> è¯´æ˜ï¼š\n> privilegesï¼šç”¨æˆ·çš„æ“ä½œæƒé™ï¼Œå¦‚SELECTï¼ŒINSERTï¼ŒUPDATEç­‰ï¼Œå¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ALL\n> databasenameï¼šæ•°æ®åº“å\n> tablenameï¼šè¡¨åï¼Œå¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨`*`è¡¨ç¤ºï¼Œå¦‚`*.*`\n> ä¾‹å­ï¼š\n```sql\nGRANT SELECT, INSERT ON test.user TO 'pig'@'%';\nGRANT ALL ON *.* TO 'pig'@'%';\nGRANT ALL ON test.* TO 'pig'@'%';\n```\n> **æ³¨æ„ï¼š**\n> ç”¨ä»¥ä¸Šå‘½ä»¤æˆæƒçš„ç”¨æˆ·ä¸èƒ½ç»™å…¶å®ƒç”¨æˆ·æˆæƒï¼Œå¦‚æœæƒ³è®©è¯¥ç”¨æˆ·å¯ä»¥æˆæƒï¼Œç”¨ä»¥ä¸‹å‘½ä»¤:\n```sql\nGRANT privileges ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION;\n```\n\n## è®¾ç½®æˆ–æ›´æ”¹ç”¨æˆ·å¯†ç \n```sql\nSET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword');\n```\n> å¦‚æœæ˜¯å½“å‰ç™»é™†ç”¨æˆ·ç”¨:\n```sql\nSET PASSWORD = PASSWORD(\"newpassword\");\n```\n> ä¾‹å­ï¼š\n```sql\nSET PASSWORD FOR 'pig'@'%' = PASSWORD(\"123456\");\nSET PASSWORD = PASSWORD(\"123456\");\n```\n\n## æ’¤é”€ç”¨æˆ·æƒé™\n```sql\nREVOKE privilege ON databasename.tablename FROM 'username'@'host';\n```\n>å…·ä½“ä¿¡æ¯å¯ä»¥ç”¨å‘½ä»¤æŸ¥çœ‹:\n```sql\nSHOW GRANTS FOR 'username'@'host';\n```\n\n## åˆ é™¤ç”¨æˆ·\n```sql\nDROP USER 'username'@'host';\n```\n\n> å‹æƒ…é“¾æ¥ï¼šhttps://www.cnblogs.com/sos-blue/p/6852945.html\n","tags":["mysql"],"categories":["mysql"]},{"title":"dockerå®‰è£…mysqlæ­å»ºä¸»ä»","url":"%2F2019%2F10%2F08%2Fdocker%E5%AE%89%E8%A3%85mysql%E6%90%AD%E5%BB%BA%E4%B8%BB%E4%BB%8E%2F","content":"## æŸ¥çœ‹é•œåƒ\ndocker search mysql:5.7\n## æ‹‰å–é•œåƒ\ndocker pull mysql:5.7\n## è¿è¡Œmysqlå®¹å™¨\n### å»ºç«‹é…ç½®æ–‡ä»¶\n![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20191007232046365.png)\n#### masteré…ç½®æ–‡ä»¶\nvim master/conf/my.cnf\n```\n[mysqld]\nserver_id = 1\nlog-bin= mysql-bin\nread-only=0\nreplicate-ignore-db=mysql\nreplicate-ignore-db=sys\nreplicate-ignore-db=information_schema\nreplicate-ignore-db=performance_schema\n```\n#### slaveé…ç½®æ–‡ä»¶\nvim slave/conf/my.cnf\n```\n[mysqld]\nserver_id = 2\nlog-bin= mysql-bin\nlog_slave_updates=1\nread-only=1\nreplicate-ignore-db=mysql\nreplicate-ignore-db=sys\nreplicate-ignore-db=information_schema\nreplicate-ignore-db=performance_schema\n```\n> æ³¨ï¼šä»åº“è¿˜éœ€è¦æ·»åŠ ä¸€ä¸ªå‚æ•°ï¼šlog-slave-updatesï¼Œlog-slave-updateså‚æ•°é»˜è®¤æ˜¯å…³é—­çš„çŠ¶æ€ï¼Œå¦‚æœä¸æ‰‹åŠ¨è®¾ç½®ï¼Œé‚£ä¹ˆbin-logåªä¼šè®°å½•ç›´æ¥åœ¨ä¸»åº“ä¸Šæ‰§è¡Œçš„SQLè¯­å¥ï¼Œç”±replicationæœºåˆ¶çš„SQLçº¿ç¨‹è¯»å–relay-logè€Œæ‰§è¡Œçš„SQLè¯­å¥å¹¶ä¸ä¼šè®°å½•åˆ°bin-logï¼Œé‚£ä¹ˆå°±æ— æ³•å®ç°ä»åº“binlogçš„å®æ—¶åŒæ­¥ã€‚\n\n### è¿è¡Œmysql-master\ndocker run --name mastermysql \\\n-p 3307:3306 \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-v ~/opt/docker/mysql/master/data:/var/lib/mysql \\\n-v ~/opt/docker/mysql/master/conf/my.cnf:/etc/mysql/my.cnf \\\n-d mysql:5.7\n\n### è¿è¡Œmysql-salve\ndocker run --name slavemysql \\\n-p 3308:3306 \\\n-e MYSQL_ROOT_PASSWORD=123456 \\\n-v ~/opt/docker/mysql/slave/data:/var/lib/mysql \\\n-v ~/opt/docker/mysql/slave/conf/my.cnf:/etc/mysql/my.cnf \\\n-d mysql:5.7\n\n## æŸ¥çœ‹dockeré•œåƒè¿è¡Œæƒ…å†µ\ndocker ps\n![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20190926115002849.png)\n## è¿›å…¥masterå®¹å™¨\ndocker exec -it mastermysql bash\n## è¿›å…¥mysql\nroot@a77371ae40bd:/# mysql -uroot -p123456\n## æŸ¥çœ‹masterçŠ¶æ€\nmysql> show master status;\n![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20190926115058346.png)\n\n## åˆ›å»ºbinlogç”¨æˆ·ï¼Œæˆæƒ\n### åˆ›å»ºbinlogç”¨æˆ·å¯†ç ä¸ºbinlog\nCREATE USER 'binlog'@'%' IDENTIFIED BY 'binlog';\n### æˆæƒbinlogç”¨æˆ·æ‹¥æœ‰binlogåº“æ‰€æœ‰è¡¨çš„æ‰€æœ‰æƒé™\nGRANT ALL ON binlog.* TO 'binlog'@'%';\n### æˆäºˆç”¨æˆ· binlog REPLICATION SLAVE æƒé™å’Œ REPLICATION CLIENT æƒé™ï¼Œç”¨äºåœ¨ä¸»ä»åº“ä¹‹é—´åŒæ­¥æ•°æ®ã€‚\nGRANT REPLICATION SLAVE, REPLICATION CLIENT ON \\*.\\* TO 'binlog'@'%';\n## è¿›å…¥salveå®¹å™¨\ndocker exec -it slavemysql bash\n## åœ¨Slaveä¸­è¿›å…¥mysqlï¼Œæ‰§è¡Œ:\n```\nCHANGE MASTER TO master_host = '172.17.0.2',\nmaster_user = 'binlog',\nmaster_password = 'binlog',\nmaster_port = 3306,\nmaster_log_file = 'mysql-bin.000003',\nmaster_log_pos = 154,\nmaster_connect_retry = 30;\n```\n\n**æ³¨ï¼š**\n>master_host ï¼šMaster çš„åœ°å€ï¼ŒæŒ‡çš„æ˜¯å®¹å™¨çš„ç‹¬ç«‹ip, å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥è¯¢ï¼š\n\n>{%raw%} docker inspect --format='{{.NetworkSettings.IPAddress}}' å®¹å™¨åç§° | å®¹å™¨id {%endraw%}\n\n>![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20190926115222899.png)\n\n>master_portï¼šMaster çš„ç«¯å£å·ï¼ŒæŒ‡çš„æ˜¯å®¹å™¨çš„ç«¯å£å·\n\n>master_userï¼šç”¨äºæ•°æ®åŒæ­¥çš„ç”¨æˆ·\n\n>master_passwordï¼šç”¨äºåŒæ­¥çš„ç”¨æˆ·çš„å¯†ç \n\n>master_log_fileï¼šæŒ‡å®š Slave ä»å“ªä¸ªæ—¥å¿—æ–‡ä»¶å¼€å§‹å¤åˆ¶æ•°æ®ï¼Œå³ä¸Šæ–‡ä¸­æåˆ°çš„ File å­—æ®µçš„å€¼ï¼ˆä¸»åº“è®°å½•çš„å€¼ï¼‰\n\n>master_log_posï¼šä»å“ªä¸ª Position å¼€å§‹è¯»ï¼Œå³ä¸Šæ–‡ä¸­æåˆ°çš„ Position å­—æ®µçš„å€¼ï¼ˆä¸»åº“çš„poså€¼ï¼‰\n\n>master_connect_retryï¼šå¦‚æœè¿æ¥å¤±è´¥ï¼Œé‡è¯•çš„æ—¶é—´é—´éš”ï¼Œå•ä½æ˜¯ç§’ï¼Œé»˜è®¤æ˜¯ 60 ç§’\n\n## æŸ¥è¯¢ä¸»ä»åŒæ­¥çŠ¶æ€:\nshow slave status \\G;\n\n![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20190926115401342.png)\n\n## å¼€å¯ä¸»ä»å¤åˆ¶è¿‡ç¨‹\nstart slave;\n\nå†æ¬¡æŸ¥è¯¢ä¸»ä»åŒæ­¥çŠ¶æ€ show slave status \\G;\n![](dockerå®‰è£…mysqlæ­å»ºä¸»ä»/markdown-img-paste-20190926115534116.png)\n\n## åœ¨masteråº“æ–°å»ºbinlogåº“ mlsql_binlogè¡¨è¿›è¡ŒåŒæ­¥æµ‹è¯•ï¼š\n<details>\n```sql\ncreate database binlog;\n\nuse binlog;\n\nCREATE TABLE `mlsql_binlog` (\n  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,\n  `log` varchar(200) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) CHARSET=utf8;\n\ninsert into `mlsql_binlog` (`id`, `log`) values(1, 'hello');\n```\n> å‹æƒ…é“¾æ¥ï¼šhttps://learnku.com/articles/30439\n","tags":["è™šæ‹ŸåŒ–"],"categories":["docker"]},{"title":"dockerå¸¸ç”¨æ“ä½œåŠæŠ€å·§","url":"%2F2019%2F10%2F07%2Fdocker%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E5%8F%8A%E6%8A%80%E5%B7%A7%2F","content":"## Dockerfileå‘½ä»¤\n> å®˜ç½‘ä»‹ç»ï¼šhttps://docs.docker.com/engine/reference/builder/\n\n1. FROM\n\n   `FROM <image>:<tag>`\n\n    ç”¨äºè®¾ç½®åŸºç¡€é•œåƒï¼Œä¸€èˆ¬æ˜¯Dockerfileçš„ç¬¬ä¸€å¥ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®štagï¼Œåˆ™é»˜è®¤tagæ˜¯latestã€‚\n2. MAINTAINER\n\n   `MAINTAINER <name>`\n\n   ç”¨æ¥æŒ‡å®šç»´æŠ¤è€…çš„å§“åå’Œè”ç³»æ–¹å¼ã€‚\n3. RUN\n\n   `RUN <command> æˆ– RUN [\"executable\",\"param1\",\"param2\"]`\n\n   æ¯æ¡ RUN æŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒåŸºç¡€ä¸Šæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ï¼Œå¹¶æäº¤ä¸ºæ–°çš„é•œåƒã€‚\n4. ADD\n\n   `ADD <src> <dest>`\n\n   å°†æ–‡ä»¶å¤åˆ¶åˆ°æ–‡ä»¶ï¼šsrcæ˜¯ç›¸å¯¹è¢«æ„å»ºçš„æºç›®å½•ï¼ˆæ‰§è¡Œdocker buildå‘½ä»¤çš„å½“å‰ç›®å½•ï¼‰çš„ç›¸å¯¹è·¯å¾„ï¼Œå¯ä»¥æ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿œç¨‹çš„æ–‡ä»¶ urlï¼Œdestæ˜¯å®¹å™¨ä¸­çš„ç»å¯¹è·¯å¾„ã€‚\n\n5. COPY\n\n   `COPY <src> <dest>`\n\n   å¤åˆ¶æœ¬åœ°ä¸»æœºçš„srcåˆ°å®¹å™¨ä¸­çš„dest,ä¸ADDæŒ‡ä»¤å·®ä¸å¤š\n\n6. ENTRYPOINT\n\n   ```bash\n   ENTRYPOINT [\"executable\",\"param1\",\"param2\"] ï¼šæ¨èä½¿ç”¨çš„execå½¢å¼\n   ENTRYPOINT command param1 param2 ï¼šshell å½¢å¼\n   ```\n\n   é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¸å¯è¢« docker run æä¾›çš„å‚æ•°è¦†ç›–ã€‚ä¸€ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINTï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚\n\n7. CMD\n   ```bash\n   CMD [\"executable\",\"param1\",\"param2\"] ä½¿ç”¨execæ‰§è¡Œï¼Œæ¨èæ–¹å¼ï¼›\n   CMD command param1 param2 åœ¨/bin/sh ä¸­æ‰§è¡Œï¼Œæä¾›ç»™éœ€è¦äº¤äº’çš„åº”ç”¨ï¼›\n   CMD [\"param1\",\"param2\"]æä¾›ç»™ENTRYPOINT çš„é»˜è®¤å‚æ•°ï¼›\n   ```\n\n   æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ CMD å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šäº†å¤šæ¡å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœç”¨æˆ·å¯åŠ¨å®¹å™¨æ—¶å€™æŒ‡å®šäº†è¿è¡Œçš„å‘½ä»¤ï¼Œåˆ™ä¼šè¦†ç›–æ‰ CMD æŒ‡å®šçš„å‘½ä»¤ã€‚\n\n8. WORKDIR\n\n   `WORKDIR /path/to/workdir`\n\n   ä¸ºåç»­çš„ RUNã€CMDã€ENTRYPOINT æŒ‡ä»¤é…ç½®å·¥ä½œç›®å½•ã€‚å¯ä»¥ä½¿ç”¨å¤šä¸ª WORKDIR æŒ‡ä»¤ï¼Œåç»­å‘½ä»¤å¦‚æœå‚æ•°æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™ä¼šåŸºäºä¹‹å‰å‘½ä»¤æŒ‡å®šçš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š\n   WORKDIR /a\n   WORKDIR b\n   WORKDIR c\n   RUN pwd\n   åˆ™æœ€ç»ˆè·¯å¾„ä¸º /a/b/c ã€‚\n\n9. EXPOSE\n\n   `EXPOSE <port> [<port>...]`\n\n   å‘Šè¯‰ Docker æœåŠ¡ç«¯å®¹å™¨æš´éœ²çš„ç«¯å£å·ï¼Œä¾›äº’è”ç³»ç»Ÿä½¿ç”¨ã€‚ä¾‹å¦‚ï¼šEXPOSE 8080 3000ï¼Œå¼€æ”¾ 8080 å’Œ 3000 ç«¯å£ã€‚\n\n10. ENV\n\n    `ENV <key> <value>`\n    æŒ‡å®šä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œä¼šè¢«åç»­ RUN æŒ‡ä»¤ä½¿ç”¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶ä¿æŒã€‚\n\n11. VOLUME\n\n    `VOLUME [\"/data\"]`\n\n    åˆ›å»ºä¸€ä¸ªå¯ä»¥ä»æœ¬åœ°ä¸»æœºæˆ–å…¶ä»–å®¹å™¨æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼Œä¸€èˆ¬ç”¨æ¥å­˜æ”¾æ•°æ®åº“å’Œéœ€è¦ä¿æŒçš„æ•°æ®ç­‰ã€‚\n\n12. USER\n\n    `USER <UID/Username>`\n\n    ä¸ºå®¹å™¨å†…æŒ‡å®š CMD RUN ENTRYPOINT å‘½ä»¤è¿è¡Œæ—¶çš„ç”¨æˆ·åæˆ–UIDã€‚\n\n## Dockerå¸¸ç”¨å‘½ä»¤\n> å®˜ç½‘ä»‹ç»ï¼šhttps://docs.docker.com/engine/reference/commandline/docker/\n\n### é•œåƒç›¸å…³\n1. æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„é•œåƒï¼š`docker images`\n2. æ‹‰å–è¿œç¨‹ä»“åº“é•œåƒï¼š`docker pull REPOSITORY:TAG`\n3. æœ¬åœ°é•œåƒæ‰“æ ‡è®°ï¼š\n`docker tag IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]`\n4. ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ: `docker build -t REPOSITORY:TAG .`\n> .ç‚¹è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œé»˜è®¤ä¼šæ‰¾å½“å‰ç›®å½•ä¸‹çš„Dockerfileè¿›è¡Œæ„å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡`-f`æŒ‡å®šDockerfileï¼š`docker build -f /path/Dockerfile -t REPOSITORY:TAG .`\n5. å°†æœ¬åœ°é•œåƒæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼š`docker push REPOSITORY:TAG`\n> ä¸€èˆ¬éœ€è¦ä¸‰æ­¥ï¼š\n> A. å…ˆå°†å·²æœ‰é•œåƒæ‰“æ ‡ç­¾:`docker tag IMAGE_ID REPOSITORY:TAG` éœ€è¦tagä¸ºè¿œç¨‹çš„ä»“åº“åœ°å€\n> B. ç™»å½•è¿œç¨‹ä»“åº“ï¼š`docker login â€“username=USERNAME REPOSITORY_REGOIN`\n> C. æ¨é€é•œåƒåˆ°è¿œç¨‹ä»“åº“ï¼š`docker push REPOSITORY:TAG`\n>\n> æ¯”å¦‚å°†hello-docker:v1æ¨é€åˆ°docker hubåº“ï¼š\n> docker push hub.docker.com/r/bebee/demo/hello-docker:v1\n> dockeré•œåƒåº“ï¼š\n> docker hubï¼šhttps://hub.docker.com\n> ç½‘æ˜“äº‘é•œåƒä¸­å¿ƒï¼šhttps://c.163yun.com/hub#/m/home/\n6. åˆ é™¤é•œåƒï¼š`docker rmi IMAGE_ID/ REPOSITORY:TAG`\n> å¼ºåˆ¶åˆ é™¤ï¼š`docker rmi -f IMAGE_ID`\n7. åˆ é™¤untagged imagesï¼š`docker rmi $(docker images | grep \"^<none>\" | awk \"{print $3}\")`\n8. åˆ é™¤å…¨éƒ¨imageï¼š`docker rmi $(docker images -q)`\n9. åˆ é™¤æ‰€æœ‰ä¸ä½¿ç”¨çš„é•œåƒï¼š`docker image prune --force --all` æˆ– `docker image prune -f -a`\n\né•œåƒæ“ä½œæµç¨‹ç¤ºæ„å›¾ï¼š\n![é•œåƒæ“ä½œæµç¨‹ç¤ºæ„å›¾](dockerå¸¸ç”¨æ“ä½œåŠæŠ€å·§/markdown-img-paste-20191212230950631.png)\n\n### å®¹å™¨ç›¸å…³\n1. æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š`docker ps`\n2. åˆ—å‡ºæ‰€æœ‰å®¹å™¨IDï¼š`docker ps -aq`\n3. æŸ¥çœ‹æ­£åœ¨è¿è¡Œå®¹å™¨çš„æ—¥å¿—ï¼š`docker logs -f CONTAINER_ID`\n4. åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼š`docker container list`\n5. åœæ­¢å®¹å™¨ï¼š`docker stop CONTAINER_ID`\n> åœæ­¢æ‰€æœ‰çš„containerï¼š`docker stop $(docker ps -a -q) `\n6. åˆ é™¤å®¹å™¨ï¼š`docker rm CONTAINER_ID`\n> åˆ é™¤æ‰€æœ‰containerï¼š`docker rm $(docker ps -a -q)`\n7. ä»å®¹å™¨åˆ°å®¿ä¸»æœºå¤åˆ¶ï¼š`docker cp CONTAINER:SRC_PATH DEST_PATH`\n8. ä»å®¿ä¸»æœºåˆ°å®¹å™¨å¤åˆ¶ï¼š`docker cp SRC_PATH CONTAINER:DEST_PATH`\n9. åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨ï¼š`docker container prune`\n10. åœæ­¢/å¯åŠ¨/æ€æ­»/é‡å¯ä¸€ä¸ªå®¹å™¨ï¼š`docker stop/start/kill/restart CONTAINER_ID/CONTAINER_NAME`\n11. è¿›å…¥å®¹å™¨ï¼š`docker exec -it CONTAINER_ID /bin/bash`\n> docker exec ï¼šåœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤\n> -d :åˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ\n> -i :å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDINï¼ˆæ ‡å‡†è¾“å…¥ï¼‰ æ‰“å¼€,ä»¥äº¤äº’è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›\n> -t: ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›\n12. è¿è¡Œå®¹å™¨ï¼š`docker run [OPTIONS] IMAGE [COMMAND] [ARG...]`\n> OPTIONSè¯´æ˜ï¼š\n>\t-a stdin:Â æŒ‡å®šæ ‡å‡†è¾“å…¥è¾“å‡ºå†…å®¹ç±»å‹ï¼Œå¯é€‰ STDIN/STDOUT/STDERR ä¸‰é¡¹ï¼›\n>\t-d:Â åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›\n>\t-i:Â ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›\n>\t-P:Â éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„é«˜ç«¯å£\n>\t-p:Â æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£\n>\t-t:Â ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›\n>\t--name=\"nginx-lb\":Â ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›\n>\t--dns 8.8.8.8:Â æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›\n>\t--dns-search example.com:Â æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›\n>\t-h \"mars\":Â æŒ‡å®šå®¹å™¨çš„hostnameï¼›\n>\t-e username=\"ritchie\":Â è®¾ç½®ç¯å¢ƒå˜é‡ï¼›\n>\t--env-file=[]:Â ä»æŒ‡å®šæ–‡ä»¶è¯»å…¥ç¯å¢ƒå˜é‡ï¼›\n>\t--cpuset=\"0-2\" or --cpuset=\"0,1,2\":Â ç»‘å®šå®¹å™¨åˆ°æŒ‡å®šCPUè¿è¡Œï¼›\n>\t-m :è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›\n>\t--net=\"bridge\":Â æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container:Â å››ç§ç±»å‹ï¼›\n>\t--link=[]:Â æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨ï¼›\n>\t--expose=[]:Â å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›\n>\t--volume , -v: ç»‘å®šä¸€ä¸ªå·\n","tags":["è™šæ‹ŸåŒ–"],"categories":["docker"]},{"title":"Hello World","url":"%2F2019%2F09%2F27%2Fhello-world%2F","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"}]